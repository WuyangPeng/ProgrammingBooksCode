<p class="mce-root">What was once only considered a language to add enhancements and widgets to a web page has since evolved into its own fully-fledged ecosystem. As of the beginning of 2015, it stands as the second most popular language in terms of questions tagged on stack overflow, next to only Java, with around a million questions tagged on it. There are tons of frameworks and environments to make it possible to run JavaScript almost anywhere. I believe Atwood's law says it best:</p>
<div class="packt_quote">Anything that can be written in JavaScript will eventually be written<br /> in JavaScript!"</div>
<p>While this quote dates back to 2007, it's never been more true than today. Not only can you use JavaScript to develop a complete single-page application such as Gmail, but you will also see how we can achieve the following projects with JavaScript in the coming chapters of the book:</p>
<ul><li>Completely power the backend using Node.js and Express.js</li><li>Persist data with a powerful document oriented database such as MongoDB</li><li>Write dynamic HTML pages using Handlebars.js</li><li>Deploy your entire project to the cloud using services such as Heroku and <strong>Amazon Web Services</strong> (<strong>AWS</strong>)</li></ul>
<p>With the introduction of Node.js, JavaScript has officially gone in a direction that was never even possible before. Now you can use JavaScript on the server and you can also use it to develop full-scale, enterprise-level applications. When you combine this with the power of MongoDB and its JSON-powered data, you can work with JavaScript in every layer of your application.</p>
<p>Let's quickly go through some basic concepts of Node.js and MongoDB, which would be helpful for you to follow the rest of the chapters in this book.</p>
<h1>A short introduction to Node.js</h1>
<p class="mce-root">One of the most important things that people get confused about while getting introduced to Node.js is to understand what exactly it is. Is it a different language altogether, is it just a framework on top of it, or is it something else? Node.js is definitely not a new language, and it is not just a framework on JavaScript. It can be considered as a runtime environment for JavaScript built on top of Google's V8 engine. So, it provides us with a context where we can write JavaScript code on any platform where Node.js can be installed. Anywhere!</p>
<p>Now a bit about its history! Back in 2009, Ryan Dahl gave a presentation at JSConf that changed JavaScript forever. During his presentation, he introduced Node.js to the JavaScript community. After a roughly 45-minute talk, he concluded it, receiving a standing ovation from the audience in the process. He was inspired to write Node.js after he saw a simple file upload progress bar on Flickr, the image-sharing site. Realizing that the site was going about the whole process the wrong way, he<br /> decided that there had to be a better solution.</p>
<p>Now let's go through the features of Node.js, which makes it unique from other server-side programming languages.</p>
<h2>The advantage that the V8 engine brings in</h2>
<p>The V8 engine was developed by Google and was open sourced in 2008. As we all know, JavaScript is an interpreted language and it will not be as efficient as a compiled language, as each line of code gets interpreted one by one while the code gets executed. The V8 engine brings in an efficient model here, where the JavaScript code will be compiled into machine-level code and the executions will happen on the compiled code instead of interpreting the JavaScript.</p>
<h2>Node.js is single threaded!</h2>
<p>With the advent of web, the traditional JavaScript was intended for adding simple functionality and minimal runtime in browser. Thus, JavaScript was kept single threaded scripting language. Now just to get a brief idea regarding single threaded models, lets consider the following <mark class="cdpcomment" data-comment-id="5">diagram.</mark></p>
<div class="CDPAlignCenter CDPAlign"><img src="https://packt-type-cloud.s3.amazonaws.com/uploads/sites/1585/2017/06/B08314_01_01.jpg" /></div>
<p>A single threaded model creates a single callstack in an execution context. In preceding code, when the function <kbd>getData()</kbd> is invoked, the function is pushed in stack for execution sequentially.</p>
<p>In context of Node.js, JavaScript is the base scripting language, hence Node.js is single threaded.</p>
<p>You might be asking, how does a single threaded model help? Typical PHP, ASP.NET, Ruby, or Java-based servers follow a model where each client request results in the instantiation of a new thread or even a process. When it comes to Node.js, requests are run on the same thread with even shared resources. A common question that is often asked is what will be the advantage of using such a model? To understand this, we should understand the problem that Node.js tries to resolve. It tries to do asynchronous processing on a single thread to provide more performance and scalability for applications that are supposed to handle too much web traffic. Imagine web applications that handle millions of concurrent requests; if the server makes a new thread for handling each request that comes in, it will consume a lot of resources and we would end up trying to add more and more servers to increase the scalability of the application. The single threaded asynchronous processing model has its advantage in the previous context, and you can process much more concurrent requests with less number of server-side resources. However, there is a downside to this approach; Node (by default) will not utilize the number of CPU cores available on the server it is running on without using extra modules like <kbd>pm2</kbd>.</p>
<div class="packt_infobox">The point that Node.js is single threaded doesn't mean that it doesn't use threads internally. It is just that the developer and the execution context that the code has exposure to have no control over the threading model internally used by Node.js.<br /> If you are new to the concept of threads and process, we would suggest you to go through some preliminary articles about these topics. There are plenty of YouTube videos as well on the same topic.<br /> The following reference could be used as a starting point:&#160;<a href="http://www.cs.ucsb.edu/&#126;rich/class/cs170/notes/IntroThreads/"><span class="URLPACKT">http://www.cs.ucsb.edu/&#126;rich/class/cs170/notes/IntroThreads/</span></a>.</div>
<p class="mce-root"></p>
<p></p>
<h2>Non-blocking asynchronous execution</h2>
<p>One of the most powerful features of Node is that it is event-driven and asynchronous. So how does an asynchronous model work? Imagine you have a block of code and at some <em>nth</em> line you have an operation that is time consuming. So what happens to the lines that follow the <em>nth</em> line while this code gets executed? In normal synchronous programming models, the lines that follow the <em>nth</em> line will have to wait till the operation at that line completes. An asynchronous model handles this case differently. Let us visualize this scenario with help of following code and a figure.</p>
<div class="CDPAlignCenter CDPAlign"><img src="https://packt-type-cloud.s3.amazonaws.com/uploads/sites/1585/2017/06/B08314_01_02.jpg" /></div>
<p></p>
<p>In preceding case the <kbd>setTimeout</kbd> method is provided by JavaScript<strong>(Node.js) api</strong>. Hence, this method is recognized as synchronous and is executed in different execution context. According to functionality to <kbd>setTimeout</kbd> it executes the callback function after specified duration in our case after three seconds.</p>
<p>Further, the current execution is never blocked for a process to complete. When node api determines that the completion of event has been fired, it will execute your callback function at that moment.</p>
<p>In a typical synchronous programming language, executing the preceding code<br /> will yield the following output:</p>
<div class="CDPAlignCenter CDPAlign"><img src="https://packt-type-cloud.s3.amazonaws.com/uploads/sites/1585/2017/06/B08314_01_03.jpg" /></div>
<div class="packt_infobox">If you are still interested in learning more about asynchronous models and the callback concept in JavaScript, <strong>Mozilla Developer Network</strong> (<strong>MDN</strong>) has many articles that explain these concepts in detail.</div>
<h1>npm - the Node Package Manager</h1>
<p>Writing applications with Node is really enjoyable when you realize the sheer wealth of information and tools at your disposal! Using Node's built-in package manager npm, you can find literally tens of thousands of modules that can be installed and used within your application with just a few keystrokes! One of the reasons for the biggest success of Node.js is npm, which is one of the best package managers out there with a very minute learning curve. If this is the first ever package manager<br /> that you are getting exposed to, then you should consider yourself lucky!</p>
<p>On a regular month, npm handles more than a billion downloads and it has around 150,000 packages currently available for you to download. You can view the library of available modules by visiting <a href="http://www.npmjs.com"><span class="URLPACKT">www.npmjs.com</span></a>. Downloading and installing any module within your application is as simple as executing the <kbd>npm install package</kbd> command. Have you written a module that you want to share with the world? You can package it up using npm and upload it to the public <a href="http://www.npmjs.org"><span class="URLPACKT">www.npmjs.org</span></a> registry just as easily! If you are not sure how a module you installed works, the source code is right there in your projects' <kbd>node_modules/</kbd> folder waiting to be explored!!</p>
<div class="packt_infobox">Package versions of modules in npm follow semantic versioning, such as <kbd>major.minor.patch</kbd> order.</div>
<p class="mce-root"></p>
<h1 class="mce-root">Summary</h1>
<p class="mce-root">In this chapter, we reviewed what is to be expected throughout the rest of this book. We discussed the amazing current state of JavaScript and how it can be used to power the full stack of a web application. Not that you needed any convincing in the first place, but I hope you're excited and ready to get started writing web applications using Node.js and MongoDB! Next up, we will set up your development environment and get you up and running with Node, MongoDB, and npm as well as write and launch a quick Node app that uses MongoDB!</p>