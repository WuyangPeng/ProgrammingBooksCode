<html>
<head>
<title>February 2003/Avoiding the Visual C++ Runtime Library</title>
</head>

<body>


<h4>Listing 11  Implementing per-class allocation</h4>

<pre>

class HeapBasedClass
{
    ...

public:
    void *operator new(size_t si)
    {
        return ::HeapAlloc(::GetProcessHeap(), 0, si);
    }
    void operator delete (void *pv) throw()
    {
        ::HeapFree(::GetProcessHeap(), 0, pv);
    }
};


</pre>
</body>
</html>
