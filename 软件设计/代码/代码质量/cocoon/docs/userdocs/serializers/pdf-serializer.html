<html xmlns:NetUtils="org.apache.cocoon.util.NetUtils">
<head>
<META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>PDF Serializer</title>
<script type="text/javascript" src="resources/script.js" language="JavaScript"></script>
</head>
<body bgcolor="#ffffff" marginheight="4" marginwidth="4" leftmargin="4" topmargin="4" alink="#cc0000" vlink="#0086b2" link="#039acc" text="#000000">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td align="left" valign="top" rowspan="3" height="60" width="135"><img border="0" vspace="0" hspace="0" src="images/logo.gif" height="60" width="135"></td><td background="images/line.gif" colspan="2" align="left" valign="top" height="5" width="100%"><img align="left" border="0" vspace="0" hspace="0" src="images/line.gif" height="5" width="1"></td><td align="left" valign="top" rowspan="3" height="60" width="29"><img border="0" vspace="0" hspace="0" src="images/right.gif" height="60" width="29"></td>
</tr>
<tr>
<td bgcolor="#0086b2" colspan="2" align="right" valign="top" height="35" width="100%"><img align="right" alt="PDF Serializer" border="0" vspace="0" hspace="0" src="graphics/pdf-serializer-header.jpg_label=PDF%20Serializer.jpg"></td>
</tr>
<tr>
<td background="images/bottom.gif" bgcolor="#0086b2" align="left" valign="top" height="20" width="100%"><img align="left" border="0" vspace="0" hspace="0" src="images/bottom.gif" height="20" width="3"></td><td background="images/bottom.gif" width="288" valign="top" height="20" bgcolor="#0086b2" align="right">
<table width="288" cellspacing="0" cellpadding="0" border="0">
<tr>
<td align="left" valign="top" height="20" width="96"><a onMouseOver="rolloverOn('xml');" onMouseOut="rolloverOff('xml');" target="new" href="http://xml.apache.org/"><img onLoad="rolloverLoad('xml', 'images/button-xml-hi.gif', 'images/button-xml-lo.gif');" border="0" vspace="0" hspace="0" name="xml" src="images/button-xml-lo.gif" height="20" width="96" alt="http://xml.apache.org/"></a></td><td align="left" valign="top" height="20" width="96"><a onMouseOver="rolloverOn('asf');" onMouseOut="rolloverOff('asf');" target="new" href="http://www.apache.org/"><img onLoad="rolloverLoad('asf', 'images/button-asf-hi.gif', 'images/button-asf-lo.gif');" border="0" vspace="0" hspace="0" name="asf" src="images/button-asf-lo.gif" height="20" width="96" alt="http://www.apache.org/"></a></td><td align="left" valign="top" height="20" width="96"><a onMouseOver="rolloverOn('w3c');" onMouseOut="rolloverOff('w3c');" target="new" href="http://www.w3.org/"><img onLoad="rolloverLoad('w3c', 'images/button-w3c-hi.gif', 'images/button-w3c-lo.gif');" border="0" vspace="0" hspace="0" name="w3c" src="images/button-w3c-lo.gif" height="20" width="96" alt="http://www.w3.org/"></a></td>
</tr>
</table>
</td>
</tr>
</table>
<table width="100%" cellspacing="0" cellpadding="0" border="0">
<tr width="100%">
<td valign="top" width="120">
<table width="120" cellspacing="0" cellpadding="0" border="0">
<tr>
<td valign="top" align="left"><img width="120" vspace="0" src="images/join.gif" hspace="0" height="14" border="0"><br>
</td>
</tr>
<tr>
<td valign="top" align="left"><a onMouseOver="rolloverOn('Main')" onMouseOut="rolloverOff('Main')" href="../../index.html"><img onLoad="rolloverLoad('Main', 'graphics/Main-label_over.jpg', 'graphics/Main-label.jpg');" vspace="0" hspace="0" name="Main" width="120" height="12" border="0" src="graphics/Main-label.jpg" alt="Main"></a></td>
</tr>
<tr>
<td valign="top" align="left"><a onMouseOver="rolloverOn('User Documentation')" onMouseOut="rolloverOff('User Documentation')" href="../index.html"><img onLoad="rolloverLoad('User Documentation', 'graphics/User%20Documentation-label_over.jpg', 'graphics/User%20Documentation-label.jpg');" vspace="0" hspace="0" name="User Documentation" width="120" height="12" border="0" src="graphics/User%20Documentation-label.jpg" alt="User Documentation"></a></td>
</tr>
<tr>
<td valign="top" align="left"><img alt="Serializers" width="120" vspace="0" src="graphics/Serializers-separator.jpg" hspace="0" height="20" border="0"><br>
</td>
</tr>
<tr>
<td valign="top" align="left"><a onMouseOver="rolloverOn('Overview')" onMouseOut="rolloverOff('Overview')" href="serializers.html"><img onLoad="rolloverLoad('Overview', 'graphics/Overview-label_over.jpg', 'graphics/Overview-label.jpg');" vspace="0" hspace="0" name="Overview" width="120" height="12" border="0" src="graphics/Overview-label.jpg" alt="Overview"></a></td>
</tr>
<tr>
<td valign="top" align="left"><img alt="Default" width="120" vspace="0" src="graphics/Default-separator.jpg" hspace="0" height="20" border="0"><br>
</td>
</tr>
<tr>
<td valign="top" align="left"><a onMouseOver="rolloverOn('HTML Serializer')" onMouseOut="rolloverOff('HTML Serializer')" href="html-serializer.html"><img onLoad="rolloverLoad('HTML Serializer', 'graphics/HTML%20Serializer-label_over.jpg', 'graphics/HTML%20Serializer-label.jpg');" vspace="0" hspace="0" name="HTML Serializer" width="120" height="12" border="0" src="graphics/HTML%20Serializer-label.jpg" alt="HTML Serializer"></a></td>
</tr>
<tr>
<td valign="top" align="left"><img alt="Core" width="120" vspace="0" src="graphics/Core-separator.jpg" hspace="0" height="20" border="0"><br>
</td>
</tr>
<tr>
<td valign="top" align="left"><a onMouseOver="rolloverOn('XML Serializer')" onMouseOut="rolloverOff('XML Serializer')" href="xml-serializer.html"><img onLoad="rolloverLoad('XML Serializer', 'graphics/XML%20Serializer-label_over.jpg', 'graphics/XML%20Serializer-label.jpg');" vspace="0" hspace="0" name="XML Serializer" width="120" height="12" border="0" src="graphics/XML%20Serializer-label.jpg" alt="XML Serializer"></a></td>
</tr>
<tr>
<td valign="top" align="left"><a onMouseOver="rolloverOn('Text Serializer')" onMouseOut="rolloverOff('Text Serializer')" href="text-serializer.html"><img onLoad="rolloverLoad('Text Serializer', 'graphics/Text%20Serializer-label_over.jpg', 'graphics/Text%20Serializer-label.jpg');" vspace="0" hspace="0" name="Text Serializer" width="120" height="12" border="0" src="graphics/Text%20Serializer-label.jpg" alt="Text Serializer"></a></td>
</tr>
<tr>
<td valign="top" align="left"><a onMouseOver="rolloverOn('WAP/WML Serializer')" onMouseOut="rolloverOff('WAP/WML Serializer')" href="wap-serializer.html"><img onLoad="rolloverLoad('WAP/WML Serializer', 'graphics/WAP/WML%20Serializer-label_over.jpg', 'graphics/WAP/WML%20Serializer-label.jpg');" vspace="0" hspace="0" name="WAP/WML Serializer" width="120" height="12" border="0" src="graphics/WAP/WML%20Serializer-label.jpg" alt="WAP/WML Serializer"></a></td>
</tr>
<tr>
<td valign="top" align="left"><a onMouseOver="rolloverOn('SVG Serializer')" onMouseOut="rolloverOff('SVG Serializer')" href="svg-serializer.html"><img onLoad="rolloverLoad('SVG Serializer', 'graphics/SVG%20Serializer-label_over.jpg', 'graphics/SVG%20Serializer-label.jpg');" vspace="0" hspace="0" name="SVG Serializer" width="120" height="12" border="0" src="graphics/SVG%20Serializer-label.jpg" alt="SVG Serializer"></a></td>
</tr>
<tr>
<td valign="top" align="left"><a onMouseOver="rolloverOn('SVG/XML Serializer')" onMouseOut="rolloverOff('SVG/XML Serializer')" href="svgxml-serializer.html"><img onLoad="rolloverLoad('SVG/XML Serializer', 'graphics/SVG/XML%20Serializer-label_over.jpg', 'graphics/SVG/XML%20Serializer-label.jpg');" vspace="0" hspace="0" name="SVG/XML Serializer" width="120" height="12" border="0" src="graphics/SVG/XML%20Serializer-label.jpg" alt="SVG/XML Serializer"></a></td>
</tr>
<tr>
<td valign="top" align="left"><a onMouseOver="rolloverOn('SVG/JPEG Serializer')" onMouseOut="rolloverOff('SVG/JPEG Serializer')" href="svgjpeg-serializer.html"><img onLoad="rolloverLoad('SVG/JPEG Serializer', 'graphics/SVG/JPEG%20Serializer-label_over.jpg', 'graphics/SVG/JPEG%20Serializer-label.jpg');" vspace="0" hspace="0" name="SVG/JPEG Serializer" width="120" height="12" border="0" src="graphics/SVG/JPEG%20Serializer-label.jpg" alt="SVG/JPEG Serializer"></a></td>
</tr>
<tr>
<td valign="top" align="left"><a onMouseOver="rolloverOn('SVG/PNG Serializer')" onMouseOut="rolloverOff('SVG/PNG Serializer')" href="svgpng-serializer.html"><img onLoad="rolloverLoad('SVG/PNG Serializer', 'graphics/SVG/PNG%20Serializer-label_over.jpg', 'graphics/SVG/PNG%20Serializer-label.jpg');" vspace="0" hspace="0" name="SVG/PNG Serializer" width="120" height="12" border="0" src="graphics/SVG/PNG%20Serializer-label.jpg" alt="SVG/PNG Serializer"></a></td>
</tr>
<tr>
<td valign="top" align="left"><a onMouseOver="rolloverOn('VRML Serializer')" onMouseOut="rolloverOff('VRML Serializer')" href="vrml-serializer.html"><img onLoad="rolloverLoad('VRML Serializer', 'graphics/VRML%20Serializer-label_over.jpg', 'graphics/VRML%20Serializer-label.jpg');" vspace="0" hspace="0" name="VRML Serializer" width="120" height="12" border="0" src="graphics/VRML%20Serializer-label.jpg" alt="VRML Serializer"></a></td>
</tr>
<tr>
<td valign="top" align="left"><a onMouseOver="rolloverOn('Link Serializer')" onMouseOut="rolloverOff('Link Serializer')" href="link-serializer.html"><img onLoad="rolloverLoad('Link Serializer', 'graphics/Link%20Serializer-label_over.jpg', 'graphics/Link%20Serializer-label.jpg');" vspace="0" hspace="0" name="Link Serializer" width="120" height="12" border="0" src="graphics/Link%20Serializer-label.jpg" alt="Link Serializer"></a></td>
</tr>
<tr>
<td valign="top" align="left"><img alt="Optional" width="120" vspace="0" src="graphics/Optional-separator.jpg" hspace="0" height="20" border="0"><br>
</td>
</tr>
<tr>
<td valign="top" align="left"><a onMouseOver="rolloverOn('PDF Serializer')" onMouseOut="rolloverOff('PDF Serializer')" href="pdf-serializer.html"><img onLoad="rolloverLoad('PDF Serializer', 'graphics/PDF%20Serializer-label_over.jpg', 'graphics/PDF%20Serializer-label.jpg');" vspace="0" hspace="0" name="PDF Serializer" width="120" height="12" border="0" src="graphics/PDF%20Serializer-label.jpg" alt="PDF Serializer"></a></td>
</tr>
<tr>
<td valign="top" align="left"><a onMouseOver="rolloverOn('PS Serializer')" onMouseOut="rolloverOff('PS Serializer')" href="ps-serializer.html"><img onLoad="rolloverLoad('PS Serializer', 'graphics/PS%20Serializer-label_over.jpg', 'graphics/PS%20Serializer-label.jpg');" vspace="0" hspace="0" name="PS Serializer" width="120" height="12" border="0" src="graphics/PS%20Serializer-label.jpg" alt="PS Serializer"></a></td>
</tr>
<tr>
<td valign="top" align="left"><a onMouseOver="rolloverOn('PCL Serializer')" onMouseOut="rolloverOff('PCL Serializer')" href="pcl-serializer.html"><img onLoad="rolloverLoad('PCL Serializer', 'graphics/PCL%20Serializer-label_over.jpg', 'graphics/PCL%20Serializer-label.jpg');" vspace="0" hspace="0" name="PCL Serializer" width="120" height="12" border="0" src="graphics/PCL%20Serializer-label.jpg" alt="PCL Serializer"></a></td>
</tr>
<tr>
<td align="left" valign="top"><img width="120" vspace="0" src="images/close.gif" hspace="0" height="14" border="0"><br>
</td>
</tr>
</table>
</td><td>
<table cellspacing="0" cellpadding="0" border="0">
<tr>
<td height="10" width="100%"></td>
</tr>
<tr>
<td>
    
    
        
<div align="right">
<table cellpadding="0" cellspacing="0" width="98%" border="0">
<tr>
<td align="right" valign="bottom" height="7" width="9"><img border="0" hspace="0" vspace="0" height="7" width="9" src="images/bar-top-left.gif"></td><td background="images/bar-border-top.gif"><img border="0" hspace="0" vspace="0" height="5" width="1" src="images/void.gif"></td><td align="left" valign="bottom" height="7" width="9"><img border="0" hspace="0" vspace="0" height="7" width="9" src="images/bar-top-right.gif"></td>
</tr>
<tr>
<td background="images/bar-border-left.gif" width="9"><img border="0" hspace="0" vspace="0" height="1" width="9" src="images/void.gif"></td><td bgcolor="#0086b2" width="100%"><font color="#ffffff" face="arial,helvetica,sanserif" size="+1"><img border="0" hspace="0" vspace="0" height="5" width="5" src="images/void.gif"><b>PDF Serializer</b></font></td><td background="images/bar-border-right.gif" width="9"><img border="0" hspace="0" vspace="0" height="1" width="9" src="images/void.gif"></td>
</tr>
<tr>
<td align="right" valign="top" height="12" width="9"><img border="0" hspace="0" vspace="0" height="12" width="9" src="images/bar-bottom-left.gif"></td><td background="images/bar-border-bottom.gif"><img border="0" hspace="0" vspace="0" height="12" src="images/void.gif"></td><td align="left" valign="top" height="12" width="9"><img border="0" hspace="0" vspace="0" height="12" width="9" src="images/bar-bottom-right.gif"></td>
</tr>
</table>
<table cellpadding="0" cellspacing="0" width="98%" border="0">
<tr>
<td><font color="#000000" face="arial,helvetica,sanserif">
            
<p align="justify">The pdf serializer takes fo xml events as input. By using the
                     FOP project it creates pdf out of the sax events.</p>
                  
<p align="justify">This serializer is optional and requires the fop package
                     in the lib directory when building cocoon 2. However,
                     the distribution includes this package already.</p>
            
<blockquote>
<ul>
                
<li>Name : fo2pdf</li>
                
<li>Class: org.apache.cocoon.serialization.FOPSerializer</li>
                
<li>Cacheable: yes.</li>
            
</ul>
</blockquote>
        
</font></td>
</tr>
</table>
</div>
<br>
        
<div align="right">
<table cellpadding="0" cellspacing="0" width="98%" border="0">
<tr>
<td align="right" valign="bottom" height="7" width="9"><img border="0" hspace="0" vspace="0" height="7" width="9" src="images/bar-top-left.gif"></td><td background="images/bar-border-top.gif"><img border="0" hspace="0" vspace="0" height="5" width="1" src="images/void.gif"></td><td align="left" valign="bottom" height="7" width="9"><img border="0" hspace="0" vspace="0" height="7" width="9" src="images/bar-top-right.gif"></td>
</tr>
<tr>
<td background="images/bar-border-left.gif" width="9"><img border="0" hspace="0" vspace="0" height="1" width="9" src="images/void.gif"></td><td bgcolor="#0086b2" width="100%"><font color="#ffffff" face="arial,helvetica,sanserif" size="+1"><img border="0" hspace="0" vspace="0" height="5" width="5" src="images/void.gif"><b>FOP and Embedding Fonts</b></font></td><td background="images/bar-border-right.gif" width="9"><img border="0" hspace="0" vspace="0" height="1" width="9" src="images/void.gif"></td>
</tr>
<tr>
<td align="right" valign="top" height="12" width="9"><img border="0" hspace="0" vspace="0" height="12" width="9" src="images/bar-bottom-left.gif"></td><td background="images/bar-border-bottom.gif"><img border="0" hspace="0" vspace="0" height="12" src="images/void.gif"></td><td align="left" valign="top" height="12" width="9"><img border="0" hspace="0" vspace="0" height="12" width="9" src="images/bar-bottom-right.gif"></td>
</tr>
</table>
<table cellpadding="0" cellspacing="0" width="98%" border="0">
<tr>
<td><font color="#000000" face="arial,helvetica,sanserif">
          
<p align="justify">Dynamically generating a pdf file (with embeded fonts) in Cocoon
            is basically 8 steps:</p>
          
<blockquote>
<ol>
            
<li>Create the font(s) metric file(s).</li>
            
<li>Create a custom configuration file for FOP (Cocoons PDF renderer)
              which tells it what fonts are available and where to find them.</li>
            
<li>Create your xml (left as an exercise for the reader ;)</li>
            
<li>Create your xslt (again, up to you)</li>
            
<li>In the sitemap, tell the fo2pdf serializer where your custom
              configuration file is located.</li>
            
<li>Add a match for your pdf (I'm sure you can do the rest...).</li>
            
<li>Start Cocoon.</li>
            
<li>Request your pdf.</li>
          
</ol>
</blockquote>
          
<p align="justify">Easy yeah? OK. Step-by-step...</p>

          
<div align="right">
<table cellpadding="0" cellspacing="0" width="95%" border="0">
<tr>
<td align="right" valign="bottom" height="7" width="9"><img border="0" hspace="0" vspace="0" height="7" width="9" src="images/bar-top-left.gif"></td><td background="images/bar-border-top.gif"><img border="0" hspace="0" vspace="0" height="5" width="1" src="images/void.gif"></td><td align="left" valign="bottom" height="7" width="9"><img border="0" hspace="0" vspace="0" height="7" width="9" src="images/bar-top-right.gif"></td>
</tr>
<tr>
<td background="images/bar-border-left.gif" width="9"><img border="0" hspace="0" vspace="0" height="1" width="9" src="images/void.gif"></td><td bgcolor="#0086b2" width="100%"><font color="#ffffff" face="arial,helvetica,sanserif"><img border="0" hspace="0" vspace="0" height="5" width="5" src="images/void.gif"><b>Create the font(s) metric file(s).</b></font></td><td background="images/bar-border-right.gif" width="9"><img border="0" hspace="0" vspace="0" height="1" width="9" src="images/void.gif"></td>
</tr>
<tr>
<td align="right" valign="top" height="12" width="9"><img border="0" hspace="0" vspace="0" height="12" width="9" src="images/bar-bottom-left.gif"></td><td background="images/bar-border-bottom.gif"><img border="0" hspace="0" vspace="0" height="12" width="1" src="images/void.gif"></td><td align="left" valign="top" height="12" width="9"><img border="0" hspace="0" vspace="0" height="12" width="9" src="images/bar-bottom-right.gif"></td>
</tr>
</table>
<table cellpadding="0" cellspacing="0" width="95%" border="0">
<tr>
<td><font color="#000000" face="arial,helvetica,sanserif">
            
<p>
<table border="0" cellpadding="0" cellspacing="3" width="100%">
<tr>
<td valign="top" width="28"><img alt="Note" border="0" hspace="0" vspace="0" height="29" width="28" src="images/note.gif"></td><td valign="top"><font color="#000000" face="arial,helvetica,sanserif" size="-1"><i>All java calls have nothing else in the
              classpath OR ext directory also, instructions which have wrapped
              should be entered as one single instruction.</i></font></td>
</tr>
</table>
</p>
            
<p align="justify">The instruction to generate a font metric file is:</p>
            
<p align="justify">Windows:</p>
            
<div align="center">
<table border="0" cellpadding="0" cellspacing="4">
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td bgcolor="#ffffff">
<pre>
    java -cp fop.jar;xerces.jar;xalan.jar;batik.jar org.apache.fop.fonts.apps.TTFReader %PATH_TO_FONT% %PATH_TO_METRICS_DIR%\%FONT_NAME%.xml
            </pre>
</td><td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
</table>
</div>
            
<p align="justify">Unix:</p>
            
<div align="center">
<table border="0" cellpadding="0" cellspacing="4">
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td bgcolor="#ffffff">
<pre>
    java -cp fop.jar:xerces.jar:xalan.jar:batik.jar org.apache.fop.fonts.apps.TTFReader $PATH_TO_FONT  $PATH_TO_METRICS_DIR/$FONT_NAME.xml
            </pre>
</td><td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
</table>
</div>

            
<p align="justify">For the sake of this tutorial, I'm going to be using windows,
              converting the Arial family of fonts and storing the metrics files in
              the location <code><font face="courier, monospaced">D:\fop-fonts</font></code>.</p>
            
<p align="justify">My ttf files are located in <code><font face="courier, monospaced">C:\WINNT\Fonts</font></code>. If you are
              running on linux/windows 9x/windows ME please alter as
              appropriate.</p>

            
<p>
<table border="0" cellpadding="0" cellspacing="3" width="100%">
<tr>
<td valign="top" width="28"><img alt="Note" border="0" hspace="0" vspace="0" height="29" width="28" src="images/note.gif"></td><td valign="top"><font color="#000000" face="arial,helvetica,sanserif" size="-1"><i>I normally use Cygwin; a unix shell
              environment which runs on windows. If I slip some unix into here,
              please excuse me (although I'd welcome the feedback...).</i></font></td>
</tr>
</table>
</p>

            
<div align="right">
<table cellpadding="0" cellspacing="0" width="90%" border="0">
<tr>
<td align="right" valign="bottom" height="7" width="9"><img border="0" hspace="0" vspace="0" height="7" width="9" src="images/bar-top-left.gif"></td><td background="images/bar-border-top.gif"><img border="0" hspace="0" vspace="0" height="5" width="1" src="images/void.gif"></td><td align="left" valign="bottom" height="7" width="9"><img border="0" hspace="0" vspace="0" height="7" width="9" src="images/bar-top-right.gif"></td>
</tr>
<tr>
<td background="images/bar-border-left.gif" width="9"><img border="0" hspace="0" vspace="0" height="1" width="9" src="images/void.gif"></td><td bgcolor="#0086b2" width="100%"><font color="#ffffff" face="arial,helvetica,sanserif" size="-1"><img border="0" hspace="0" vspace="0" height="5" width="5" src="images/void.gif"><b>Generating the Arial metrics</b></font></td><td background="images/bar-border-right.gif" width="9"><img border="0" hspace="0" vspace="0" height="1" width="9" src="images/void.gif"></td>
</tr>
<tr>
<td align="right" valign="top" height="12" width="9"><img border="0" hspace="0" vspace="0" height="12" width="9" src="images/bar-bottom-left.gif"></td><td background="images/bar-border-bottom.gif"><img border="0" hspace="0" vspace="0" height="12" width="1" src="images/void.gif"></td><td align="left" valign="top" height="12" width="9"><img border="0" hspace="0" vspace="0" height="12" width="9" src="images/bar-bottom-right.gif"></td>
</tr>
</table>
<table cellpadding="0" cellspacing="0" width="90%" border="0">
<tr>
<td><font color="#000000" face="arial,helvetica,sanserif">
              
<p align="justify">Start a command session (as appropriate to your env) then change
                to Cocoon libs directory.</p>
              
<div align="center">
<table border="0" cellpadding="0" cellspacing="4">
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td bgcolor="#ffffff">
<pre>$ cd cocoon\lib</pre>
</td><td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
</table>
</div>
              
<p align="justify">create the metrics directory (D:\fop-fonts)</p>
              
<div align="center">
<table border="0" cellpadding="0" cellspacing="4">
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td bgcolor="#ffffff">
<pre>$ mkdir d:\fop-fonts</pre>
</td><td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
</table>
</div>
              
<p align="justify">create the metrics for arial.ttf, arialb.ttf, arialbi.ttf,
                ariali.ttf</p>
              
<div align="center">
<table border="0" cellpadding="0" cellspacing="4">
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td bgcolor="#ffffff">
<pre>
    $ java -cp fop.jar;xerces.jar;xalan.jar;batik.jar org.apache.fop.fonts.apps.TTFReader C:\WINNT\Fonts\arial.ttf   D:\fop-fonts\arial.ttf.xml
    $ java -cp fop.jar;xerces.jar;xalan.jar;batik.jar org.apache.fop.fonts.apps.TTFReader C:\WINNT\Fonts\arialb.ttf  D:\fop-fonts\arialb.ttf.xml
    $ java -cp fop.jar;xerces.jar;xalan.jar;batik.jar org.apache.fop.fonts.apps.TTFReader C:\WINNT\Fonts\arialbi.ttf D:\fop-fonts\arialbi.ttf.xml
    $ java -cp fop.jar;xerces.jar;xalan.jar;batik.jar org.apache.fop.fonts.apps.TTFReader C:\WINNT\Fonts\ariali.ttf  D:\fop-fonts\ariali.ttf.xml
              </pre>
</td><td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
</table>
</div>
              
<p align="justify">If everything went to plan, you should now have the metrics for
                the Arial fonts in your fop-fonts directory.</p>
            
</font></td>
</tr>
</table>
</div>
<br>
          
</font></td>
</tr>
</table>
</div>
<br>
          
<div align="right">
<table cellpadding="0" cellspacing="0" width="95%" border="0">
<tr>
<td align="right" valign="bottom" height="7" width="9"><img border="0" hspace="0" vspace="0" height="7" width="9" src="images/bar-top-left.gif"></td><td background="images/bar-border-top.gif"><img border="0" hspace="0" vspace="0" height="5" width="1" src="images/void.gif"></td><td align="left" valign="bottom" height="7" width="9"><img border="0" hspace="0" vspace="0" height="7" width="9" src="images/bar-top-right.gif"></td>
</tr>
<tr>
<td background="images/bar-border-left.gif" width="9"><img border="0" hspace="0" vspace="0" height="1" width="9" src="images/void.gif"></td><td bgcolor="#0086b2" width="100%"><font color="#ffffff" face="arial,helvetica,sanserif"><img border="0" hspace="0" vspace="0" height="5" width="5" src="images/void.gif"><b>Create a custom configuration file</b></font></td><td background="images/bar-border-right.gif" width="9"><img border="0" hspace="0" vspace="0" height="1" width="9" src="images/void.gif"></td>
</tr>
<tr>
<td align="right" valign="top" height="12" width="9"><img border="0" hspace="0" vspace="0" height="12" width="9" src="images/bar-bottom-left.gif"></td><td background="images/bar-border-bottom.gif"><img border="0" hspace="0" vspace="0" height="12" width="1" src="images/void.gif"></td><td align="left" valign="top" height="12" width="9"><img border="0" hspace="0" vspace="0" height="12" width="9" src="images/bar-bottom-right.gif"></td>
</tr>
</table>
<table cellpadding="0" cellspacing="0" width="95%" border="0">
<tr>
<td><font color="#000000" face="arial,helvetica,sanserif">
            
<p align="justify">I normally store this with the metrics file in the fop-fonts
              directory (called config.xml (ensure there's not a font called
              config ;)) although I fully qualify all the filenames just incase I
              move it ;)</p>
            
<p align="justify">I also find it useful to retain the <code><font face="courier, monospaced">.ttf</font></code> as it is also
              possible to add other types of fonts (if you want to read the FOP
              docs) and the ttf tells me where to locate the font.</p>
            
<div align="center">
<table border="0" cellpadding="0" cellspacing="4">
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td bgcolor="#ffffff">
<pre>
&lt;configuration&gt;
  &lt;fonts&gt;
    &lt;font metrics-file="D:/fop-fonts/arial.ttf.xml" kerning="yes" embed-file="C:/WINNT/Fonts/arial.ttf"&gt;
      &lt;font-triplet name="Arial" style="normal" weight="normal"/&gt;
      &lt;font-triplet name="ArialMT" style="normal" weight="normal"/&gt;
    &lt;/font&gt;
    &lt;font metrics-file="D:/fop-fonts/arialb.ttf.xml" kerning="yes" embed-file="C:/WINNT/Fonts/arialb.ttf"&gt;
      &lt;font-triplet name="Arial" style="normal" weight="bold"/&gt;
      &lt;font-triplet name="ArialMT" style="normal" weight="bold"/&gt;
    &lt;/font&gt;
    &lt;font metrics-file="D:/fop-fonts/arialbi.ttf.xml" kerning="yes" embed-file="C:/WINNT/Fonts/arialbi.ttf"&gt;
      &lt;font-triplet name="Arial" style="italic" weight="bold"/&gt;
      &lt;font-triplet name="ArialMT" style="italic" weight="bold"/&gt;
    &lt;/font&gt;
    &lt;font metrics-file="D:/fop-fonts/ariali.ttf.xml" kerning="yes" embed-file="C:/WINNT/Fonts/ariali.ttf"&gt;
      &lt;font-triplet name="Arial" style="italic" weight="normal"/&gt;
      &lt;font-triplet name="ArialMT" style="italic" weight="normal"/&gt;
    &lt;/font&gt;
  &lt;/fonts&gt;
&lt;/configuration&gt;
            </pre>
</td><td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
</table>
</div>
            
<p align="justify">There are other things you can add to this file, look at the FOP
              documentation for further information.</p>
            
<p align="justify">If you are wondering why each font has been added twice it's to do
              with the font lookup.  If the font is specified as 'Arial' and the
              weight is 'bold' then FOP searches for a
              <code><font face="courier, monospaced">&lt;font-triplet/&gt;</font></code> which matches then uses
              the parent <code><font face="courier, monospaced">&lt;font/&gt;</font></code> tag to get the actual
              font information.  If the font is specified as 'ArialMT' (it's proper
              name) it will still work.  Think of it as an alias capability.</p>
          
</font></td>
</tr>
</table>
</div>
<br>
          
<div align="right">
<table cellpadding="0" cellspacing="0" width="95%" border="0">
<tr>
<td align="right" valign="bottom" height="7" width="9"><img border="0" hspace="0" vspace="0" height="7" width="9" src="images/bar-top-left.gif"></td><td background="images/bar-border-top.gif"><img border="0" hspace="0" vspace="0" height="5" width="1" src="images/void.gif"></td><td align="left" valign="bottom" height="7" width="9"><img border="0" hspace="0" vspace="0" height="7" width="9" src="images/bar-top-right.gif"></td>
</tr>
<tr>
<td background="images/bar-border-left.gif" width="9"><img border="0" hspace="0" vspace="0" height="1" width="9" src="images/void.gif"></td><td bgcolor="#0086b2" width="100%"><font color="#ffffff" face="arial,helvetica,sanserif"><img border="0" hspace="0" vspace="0" height="5" width="5" src="images/void.gif"><b>Sitemap and fo2pdf serializer.</b></font></td><td background="images/bar-border-right.gif" width="9"><img border="0" hspace="0" vspace="0" height="1" width="9" src="images/void.gif"></td>
</tr>
<tr>
<td align="right" valign="top" height="12" width="9"><img border="0" hspace="0" vspace="0" height="12" width="9" src="images/bar-bottom-left.gif"></td><td background="images/bar-border-bottom.gif"><img border="0" hspace="0" vspace="0" height="12" width="1" src="images/void.gif"></td><td align="left" valign="top" height="12" width="9"><img border="0" hspace="0" vspace="0" height="12" width="9" src="images/bar-bottom-right.gif"></td>
</tr>
</table>
<table cellpadding="0" cellspacing="0" width="95%" border="0">
<tr>
<td><font color="#000000" face="arial,helvetica,sanserif">
            
<p align="justify">All that remains is to tell the serializer where your config file is
              located. Find the line in your sitemap which looks
              like:</p>
            
<div align="center">
<table border="0" cellpadding="0" cellspacing="4">
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td bgcolor="#ffffff">
<pre>
&lt;map:serializer name="fo2pdf" src="org.apache.cocoon.serialization.FOPSerializer" mime-type="application/pdf"/&gt;
            </pre>
</td><td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
</table>
</div>
            
<p align="justify">and replace it with...</p>
            
<div align="center">
<table border="0" cellpadding="0" cellspacing="4">
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td bgcolor="#ffffff">
<pre>
&lt;map:serializer name="fo2pdf" src="org.apache.cocoon.serialization.FOPSerializer" mime-type="application/pdf"&gt;
  &lt;user-config src="D:/fop-fonts/config.xml"/&gt;
&lt;/map:serializer&gt;
            </pre>
</td><td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
</table>
</div>
          
</font></td>
</tr>
</table>
</div>
<br>
          
<p align="justify">And that's it.  Oh, one final thing to remember: the cache isn't aware
            of your config file.  <b>Always</b> delete your cache-dir
            after modifying your config file.</p>
        
</font></td>
</tr>
</table>
</div>
<br>
    

</td>
</tr>
</table>
</td>
</tr>
</table>
<table width="100%" cellspacing="0" cellpadding="0" border="0">
<tr>
<td bgcolor="#0086b2"><img width="1" src="images/dot.gif" height="1"></td>
</tr>
<tr>
<td align="center"><font size="-1" face="arial,helvetica,sanserif" color="#0086b2"><i>Copyright &copy; 1999-2002 The Apache Software Foundation. All Rights Reserved.</i></font></td>
</tr>
</table>
</body>
</html>
