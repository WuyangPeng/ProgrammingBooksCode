<html xmlns:NetUtils="org.apache.cocoon.util.NetUtils">
<head>
<META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>ESQL Taglib</title>
<script type="text/javascript" src="resources/script.js" language="JavaScript"></script>
</head>
<body bgcolor="#ffffff" marginheight="4" marginwidth="4" leftmargin="4" topmargin="4" alink="#cc0000" vlink="#0086b2" link="#039acc" text="#000000">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td align="left" valign="top" rowspan="3" height="60" width="135"><img border="0" vspace="0" hspace="0" src="images/logo.gif" height="60" width="135"></td><td background="images/line.gif" colspan="2" align="left" valign="top" height="5" width="100%"><img align="left" border="0" vspace="0" hspace="0" src="images/line.gif" height="5" width="1"></td><td align="left" valign="top" rowspan="3" height="60" width="29"><img border="0" vspace="0" hspace="0" src="images/right.gif" height="60" width="29"></td>
</tr>
<tr>
<td bgcolor="#0086b2" colspan="2" align="right" valign="top" height="35" width="100%"><img align="right" alt="ESQL Taglib" border="0" vspace="0" hspace="0" src="graphics/esql-header.jpg_label=ESQL%20Taglib.jpg"></td>
</tr>
<tr>
<td background="images/bottom.gif" bgcolor="#0086b2" align="left" valign="top" height="20" width="100%"><img align="left" border="0" vspace="0" hspace="0" src="images/bottom.gif" height="20" width="3"></td><td background="images/bottom.gif" width="288" valign="top" height="20" bgcolor="#0086b2" align="right">
<table width="288" cellspacing="0" cellpadding="0" border="0">
<tr>
<td align="left" valign="top" height="20" width="96"><a onMouseOver="rolloverOn('xml');" onMouseOut="rolloverOff('xml');" target="new" href="http://xml.apache.org/"><img onLoad="rolloverLoad('xml', 'images/button-xml-hi.gif', 'images/button-xml-lo.gif');" border="0" vspace="0" hspace="0" name="xml" src="images/button-xml-lo.gif" height="20" width="96" alt="http://xml.apache.org/"></a></td><td align="left" valign="top" height="20" width="96"><a onMouseOver="rolloverOn('asf');" onMouseOut="rolloverOff('asf');" target="new" href="http://www.apache.org/"><img onLoad="rolloverLoad('asf', 'images/button-asf-hi.gif', 'images/button-asf-lo.gif');" border="0" vspace="0" hspace="0" name="asf" src="images/button-asf-lo.gif" height="20" width="96" alt="http://www.apache.org/"></a></td><td align="left" valign="top" height="20" width="96"><a onMouseOver="rolloverOn('w3c');" onMouseOut="rolloverOff('w3c');" target="new" href="http://www.w3.org/"><img onLoad="rolloverLoad('w3c', 'images/button-w3c-hi.gif', 'images/button-w3c-lo.gif');" border="0" vspace="0" hspace="0" name="w3c" src="images/button-w3c-lo.gif" height="20" width="96" alt="http://www.w3.org/"></a></td>
</tr>
</table>
</td>
</tr>
</table>
<table width="100%" cellspacing="0" cellpadding="0" border="0">
<tr width="100%">
<td valign="top" width="120">
<table width="120" cellspacing="0" cellpadding="0" border="0">
<tr>
<td valign="top" align="left"><img width="120" vspace="0" src="images/join.gif" hspace="0" height="14" border="0"><br>
</td>
</tr>
<tr>
<td valign="top" align="left"><a onMouseOver="rolloverOn('Main')" onMouseOut="rolloverOff('Main')" href="../../index.html"><img onLoad="rolloverLoad('Main', 'graphics/Main-label_over.jpg', 'graphics/Main-label.jpg');" vspace="0" hspace="0" name="Main" width="120" height="12" border="0" src="graphics/Main-label.jpg" alt="Main"></a></td>
</tr>
<tr>
<td valign="top" align="left"><a onMouseOver="rolloverOn('User Documentation')" onMouseOut="rolloverOff('User Documentation')" href="../index.html"><img onLoad="rolloverLoad('User Documentation', 'graphics/User%20Documentation-label_over.jpg', 'graphics/User%20Documentation-label.jpg');" vspace="0" hspace="0" name="User Documentation" width="120" height="12" border="0" src="graphics/User%20Documentation-label.jpg" alt="User Documentation"></a></td>
</tr>
<tr>
<td valign="top" align="left"><img alt="XSP" width="120" vspace="0" src="graphics/XSP-separator.jpg" hspace="0" height="20" border="0"><br>
</td>
</tr>
<tr>
<td valign="top" align="left"><a onMouseOver="rolloverOn('XSP')" onMouseOut="rolloverOff('XSP')" href="xsp.html"><img onLoad="rolloverLoad('XSP', 'graphics/XSP-label_over.jpg', 'graphics/XSP-label.jpg');" vspace="0" hspace="0" name="XSP" width="120" height="12" border="0" src="graphics/XSP-label.jpg" alt="XSP"></a></td>
</tr>
<tr>
<td valign="top" align="left"><a onMouseOver="rolloverOn('XSP Internals')" onMouseOut="rolloverOff('XSP Internals')" href="xsp-internals.html"><img onLoad="rolloverLoad('XSP Internals', 'graphics/XSP%20Internals-label_over.jpg', 'graphics/XSP%20Internals-label.jpg');" vspace="0" hspace="0" name="XSP Internals" width="120" height="12" border="0" src="graphics/XSP%20Internals-label.jpg" alt="XSP Internals"></a></td>
</tr>
<tr>
<td valign="top" align="left"><a onMouseOver="rolloverOn('XSP Logicsheets')" onMouseOut="rolloverOff('XSP Logicsheets')" href="logicsheet-concepts.html"><img onLoad="rolloverLoad('XSP Logicsheets', 'graphics/XSP%20Logicsheets-label_over.jpg', 'graphics/XSP%20Logicsheets-label.jpg');" vspace="0" hspace="0" name="XSP Logicsheets" width="120" height="12" border="0" src="graphics/XSP%20Logicsheets-label.jpg" alt="XSP Logicsheets"></a></td>
</tr>
<tr>
<td valign="top" align="left"><a onMouseOver="rolloverOn('XSP Guide')" onMouseOut="rolloverOff('XSP Guide')" href="logicsheet.html"><img onLoad="rolloverLoad('XSP Guide', 'graphics/XSP%20Guide-label_over.jpg', 'graphics/XSP%20Guide-label.jpg');" vspace="0" hspace="0" name="XSP Guide" width="120" height="12" border="0" src="graphics/XSP%20Guide-label.jpg" alt="XSP Guide"></a></td>
</tr>
<tr>
<td valign="top" align="left"><a onMouseOver="rolloverOn('Session Logicsheet')" onMouseOut="rolloverOff('Session Logicsheet')" href="session.html"><img onLoad="rolloverLoad('Session Logicsheet', 'graphics/Session%20Logicsheet-label_over.jpg', 'graphics/Session%20Logicsheet-label.jpg');" vspace="0" hspace="0" name="Session Logicsheet" width="120" height="12" border="0" src="graphics/Session%20Logicsheet-label.jpg" alt="Session Logicsheet"></a></td>
</tr>
<tr>
<td valign="top" align="left"><a onMouseOver="rolloverOn('Sessions')" onMouseOut="rolloverOff('Sessions')" href="sessions.html"><img onLoad="rolloverLoad('Sessions', 'graphics/Sessions-label_over.jpg', 'graphics/Sessions-label.jpg');" vspace="0" hspace="0" name="Sessions" width="120" height="12" border="0" src="graphics/Sessions-label.jpg" alt="Sessions"></a></td>
</tr>
<tr>
<td valign="top" align="left"><a onMouseOver="rolloverOn('Request Logicsheet')" onMouseOut="rolloverOff('Request Logicsheet')" href="request.html"><img onLoad="rolloverLoad('Request Logicsheet', 'graphics/Request%20Logicsheet-label_over.jpg', 'graphics/Request%20Logicsheet-label.jpg');" vspace="0" hspace="0" name="Request Logicsheet" width="120" height="12" border="0" src="graphics/Request%20Logicsheet-label.jpg" alt="Request Logicsheet"></a></td>
</tr>
<tr>
<td valign="top" align="left"><a onMouseOver="rolloverOn('ESQL Logicsheet')" onMouseOut="rolloverOff('ESQL Logicsheet')" href="esql.html"><img onLoad="rolloverLoad('ESQL Logicsheet', 'graphics/ESQL%20Logicsheet-label_over.jpg', 'graphics/ESQL%20Logicsheet-label.jpg');" vspace="0" hspace="0" name="ESQL Logicsheet" width="120" height="12" border="0" src="graphics/ESQL%20Logicsheet-label.jpg" alt="ESQL Logicsheet"></a></td>
</tr>
<tr>
<td valign="top" align="left"><a onMouseOver="rolloverOn('Forms')" onMouseOut="rolloverOff('Forms')" href="logicsheet-forms.html"><img onLoad="rolloverLoad('Forms', 'graphics/Forms-label_over.jpg', 'graphics/Forms-label.jpg');" vspace="0" hspace="0" name="Forms" width="120" height="12" border="0" src="graphics/Forms-label.jpg" alt="Forms"></a></td>
</tr>
<tr>
<td align="left" valign="top"><img width="120" vspace="0" src="images/close.gif" hspace="0" height="14" border="0"><br>
</td>
</tr>
</table>
</td><td>
<table cellspacing="0" cellpadding="0" border="0">
<tr>
<td height="10" width="100%"></td>
</tr>
<tr>
<td>

	
<div align="right">
<table cellpadding="0" cellspacing="0" width="98%" border="0">
<tr>
<td align="right" valign="bottom" height="7" width="9"><img border="0" hspace="0" vspace="0" height="7" width="9" src="images/bar-top-left.gif"></td><td background="images/bar-border-top.gif"><img border="0" hspace="0" vspace="0" height="5" width="1" src="images/void.gif"></td><td align="left" valign="bottom" height="7" width="9"><img border="0" hspace="0" vspace="0" height="7" width="9" src="images/bar-top-right.gif"></td>
</tr>
<tr>
<td background="images/bar-border-left.gif" width="9"><img border="0" hspace="0" vspace="0" height="1" width="9" src="images/void.gif"></td><td bgcolor="#0086b2" width="100%"><font color="#ffffff" face="arial,helvetica,sanserif" size="+1"><img border="0" hspace="0" vspace="0" height="5" width="5" src="images/void.gif"><b>Description</b></font></td><td background="images/bar-border-right.gif" width="9"><img border="0" hspace="0" vspace="0" height="1" width="9" src="images/void.gif"></td>
</tr>
<tr>
<td align="right" valign="top" height="12" width="9"><img border="0" hspace="0" vspace="0" height="12" width="9" src="images/bar-bottom-left.gif"></td><td background="images/bar-border-bottom.gif"><img border="0" hspace="0" vspace="0" height="12" src="images/void.gif"></td><td align="left" valign="top" height="12" width="9"><img border="0" hspace="0" vspace="0" height="12" width="9" src="images/bar-bottom-right.gif"></td>
</tr>
</table>
<table cellpadding="0" cellspacing="0" width="98%" border="0">
<tr>
<td><font color="#000000" face="arial,helvetica,sanserif">

    
<p align="justify">The ESQL logicsheet is an 
XSP logicsheet that performs sql queries and serializes their 
results as XML. This allows you to work with data from a wide variety of different sources when using Apache Cocoon.
</p>

    
<p align="justify">It has a number of important advantages over the old (deprecated) SQL logicsheet and SQL processor.
     For example, it allows you to mix esql with other logicsheets. It also
     supports prepared statements (which gives you automatic parameter escaping), multiple encodings
     in a single query and even multiple resultsets on one statement (if supported from database)!</p>

    
<p align="justify">The name was chosen merely to emphasise the fact that this is an extended version of the old sql logicsheet -
       esql still uses standard SQL syntax. In fact, it is just a conversion wrapper around your JDBC database
       driver, so it supports no more and no less SQL syntax than your JDBC driver supports.
    </p>
	
</font></td>
</tr>
</table>
</div>
<br>

	
<div align="right">
<table cellpadding="0" cellspacing="0" width="98%" border="0">
<tr>
<td align="right" valign="bottom" height="7" width="9"><img border="0" hspace="0" vspace="0" height="7" width="9" src="images/bar-top-left.gif"></td><td background="images/bar-border-top.gif"><img border="0" hspace="0" vspace="0" height="5" width="1" src="images/void.gif"></td><td align="left" valign="bottom" height="7" width="9"><img border="0" hspace="0" vspace="0" height="7" width="9" src="images/bar-top-right.gif"></td>
</tr>
<tr>
<td background="images/bar-border-left.gif" width="9"><img border="0" hspace="0" vspace="0" height="1" width="9" src="images/void.gif"></td><td bgcolor="#0086b2" width="100%"><font color="#ffffff" face="arial,helvetica,sanserif" size="+1"><img border="0" hspace="0" vspace="0" height="5" width="5" src="images/void.gif"><b>Installation</b></font></td><td background="images/bar-border-right.gif" width="9"><img border="0" hspace="0" vspace="0" height="1" width="9" src="images/void.gif"></td>
</tr>
<tr>
<td align="right" valign="top" height="12" width="9"><img border="0" hspace="0" vspace="0" height="12" width="9" src="images/bar-bottom-left.gif"></td><td background="images/bar-border-bottom.gif"><img border="0" hspace="0" vspace="0" height="12" src="images/void.gif"></td><td align="left" valign="top" height="12" width="9"><img border="0" hspace="0" vspace="0" height="12" width="9" src="images/bar-bottom-right.gif"></td>
</tr>
</table>
<table cellpadding="0" cellspacing="0" width="98%" border="0">
<tr>
<td><font color="#000000" face="arial,helvetica,sanserif">
		
<p align="justify">Check your <code><font face="courier, monospaced">cocoon.xconf</font></code> for this line and add it if it's not already there:</p>
		
<div align="center">
<table border="0" cellpadding="0" cellspacing="4">
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td bgcolor="#ffffff">
<pre>
&lt;builtin-logicsheet&gt;
  &lt;parameter name="prefix" value="esql"/&gt;
  &lt;parameter name="uri" value="http://apache.org/cocoon/SQL/v2"/&gt;
  &lt;parameter name="href"
  value="resource://org/apache/cocoon/components/language/markup/xsp/java/esql.xsl"/&gt;
&lt;/builtin-logicsheet&gt;
</pre>
</td><td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
</table>
</div>
	
</font></td>
</tr>
</table>
</div>
<br>

	
<div align="right">
<table cellpadding="0" cellspacing="0" width="98%" border="0">
<tr>
<td align="right" valign="bottom" height="7" width="9"><img border="0" hspace="0" vspace="0" height="7" width="9" src="images/bar-top-left.gif"></td><td background="images/bar-border-top.gif"><img border="0" hspace="0" vspace="0" height="5" width="1" src="images/void.gif"></td><td align="left" valign="bottom" height="7" width="9"><img border="0" hspace="0" vspace="0" height="7" width="9" src="images/bar-top-right.gif"></td>
</tr>
<tr>
<td background="images/bar-border-left.gif" width="9"><img border="0" hspace="0" vspace="0" height="1" width="9" src="images/void.gif"></td><td bgcolor="#0086b2" width="100%"><font color="#ffffff" face="arial,helvetica,sanserif" size="+1"><img border="0" hspace="0" vspace="0" height="5" width="5" src="images/void.gif"><b>Configuration</b></font></td><td background="images/bar-border-right.gif" width="9"><img border="0" hspace="0" vspace="0" height="1" width="9" src="images/void.gif"></td>
</tr>
<tr>
<td align="right" valign="top" height="12" width="9"><img border="0" hspace="0" vspace="0" height="12" width="9" src="images/bar-bottom-left.gif"></td><td background="images/bar-border-bottom.gif"><img border="0" hspace="0" vspace="0" height="12" src="images/void.gif"></td><td align="left" valign="top" height="12" width="9"><img border="0" hspace="0" vspace="0" height="12" width="9" src="images/bar-bottom-right.gif"></td>
</tr>
</table>
<table cellpadding="0" cellspacing="0" width="98%" border="0">
<tr>
<td><font color="#000000" face="arial,helvetica,sanserif">
		
<p align="justify">Map the</p>
		
<div align="center">
<table border="0" cellpadding="0" cellspacing="4">
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td bgcolor="#ffffff">
<pre>http://apache.org/cocoon/SQL/v2</pre>
</td><td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
</table>
</div>
		
<p align="justify">namespace to the esql prefix. Elements in the esql taglib namespace will be interpreted as input to 
the esql taglib and will be stripped from the output.</p>
		
<p align="justify">This is typically done like this:</p>
		
<div align="center">
<table border="0" cellpadding="0" cellspacing="4">
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td bgcolor="#ffffff">
<pre>
&lt;xsp:page
      language="java"
      xmlns:xsp="http://apache.org/xsp"
	  xmlns:esql="http://apache.org/cocoon/SQL/v2"
&gt;
. . .
&lt;/xsp:page&gt;
</pre>
</td><td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
</table>
</div>
	
</font></td>
</tr>
</table>
</div>
<br>
	
<div align="right">
<table cellpadding="0" cellspacing="0" width="98%" border="0">
<tr>
<td align="right" valign="bottom" height="7" width="9"><img border="0" hspace="0" vspace="0" height="7" width="9" src="images/bar-top-left.gif"></td><td background="images/bar-border-top.gif"><img border="0" hspace="0" vspace="0" height="5" width="1" src="images/void.gif"></td><td align="left" valign="bottom" height="7" width="9"><img border="0" hspace="0" vspace="0" height="7" width="9" src="images/bar-top-right.gif"></td>
</tr>
<tr>
<td background="images/bar-border-left.gif" width="9"><img border="0" hspace="0" vspace="0" height="1" width="9" src="images/void.gif"></td><td bgcolor="#0086b2" width="100%"><font color="#ffffff" face="arial,helvetica,sanserif" size="+1"><img border="0" hspace="0" vspace="0" height="5" width="5" src="images/void.gif"><b>Usage and Examples</b></font></td><td background="images/bar-border-right.gif" width="9"><img border="0" hspace="0" vspace="0" height="1" width="9" src="images/void.gif"></td>
</tr>
<tr>
<td align="right" valign="top" height="12" width="9"><img border="0" hspace="0" vspace="0" height="12" width="9" src="images/bar-bottom-left.gif"></td><td background="images/bar-border-bottom.gif"><img border="0" hspace="0" vspace="0" height="12" src="images/void.gif"></td><td align="left" valign="top" height="12" width="9"><img border="0" hspace="0" vspace="0" height="12" width="9" src="images/bar-bottom-right.gif"></td>
</tr>
</table>
<table cellpadding="0" cellspacing="0" width="98%" border="0">
<tr>
<td><font color="#000000" face="arial,helvetica,sanserif">
          
<p align="justify">At the moment documentation on esql is quite thin on the ground - however, it should be enough to get
          you started.
          In the <code><font face="courier, monospaced">docs/samples/xsp</font></code> directory you will find <code><font face="courier, monospaced">esql.xsp</font></code>, which is an example
          of two esql queries, demonstrating "nested" queries and dynamic prepared statements. However, much more
          comprehensive is the <b>schema</b> in <code><font face="courier, monospaced">esql.xsd</font></code> which is a formal specification,
          written in the W3C standard language XML Schema, of every single esql element and attribute.
          It is fairly human-readable and includes comments for the purpose of each tag.</p>

          
<p align="justify">A fairly common example is to list a query result in a table. Notice that esql:results and esql:no-results
          are mutual exclusive. So only one of them will be in your XML tree. This example takes a connection from a
          datasource defined in <code><font face="courier, monospaced">cocoon.xconf</font></code>:</p>

          
<div align="center">
<table border="0" cellpadding="0" cellspacing="4">
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td bgcolor="#ffffff">
<pre>
&lt;esql:connection&gt;
  &lt;esql:pool&gt;connectionName&lt;/esql:pool&gt;
  &lt;esql:execute-query&gt;
    &lt;esql:query&gt;SELECT mycolumn1,mycolumn2 FROM table&lt;/esql:query&gt;
    &lt;esql:results&gt;
      &lt;table&gt;
        &lt;esql:row-results&gt;
          &lt;tr&gt;
             &lt;td&gt;&lt;esql:get-string column="mycolumn1"/&gt;&lt;/td&gt;
             &lt;td&gt;&lt;esql:get-string column="mycolumn2"/&gt;&lt;/td&gt;
          &lt;/tr&gt;
        &lt;/esql:row-results&gt;
      &lt;/table&gt;
    &lt;/esql:results&gt;
    &lt;esql:no-results&gt;
       &lt;p&gt;Sorry, no results!&lt;/p&gt;
    &lt;/esql:no-results&gt;
  &lt;/esql:execute-query&gt;
&lt;/esql:connection&gt;
</pre>
</td><td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
</table>
</div>

	   
<p align="justify">For more complex lists, often nested queries are
	   needed. Esql allows arbitrary nesting of queries. However,
	   you can do table joins and then insert a header and footer
	   whenever a "watched" column value changes using the
	   <code><font face="courier, monospaced">&lt;esql:group/&gt;</font></code> and
	   <code><font face="courier, monospaced">&lt;esql:member/&gt;</font></code> tags.  It follows the
	   nesting ideology of <code><font face="courier, monospaced">&lt;xsp:logic&gt;
	   ... &lt;xsp:content&gt;&lt;/&gt;&lt;/&gt;</font></code>You can
	   nest <code><font face="courier, monospaced">&lt;esql:group&gt;</font></code> and
	   <code><font face="courier, monospaced">&lt;esql:member&gt;</font></code> indefinately.</p>

	   
<div align="center">
<table border="0" cellpadding="0" cellspacing="4">
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td bgcolor="#ffffff">
<pre>
&lt;esql:execute-query&gt;
  &lt;esql:query&gt;
    select committeeName, title, firstName, middleName, lastName, suffix,
status from committeeMember left join directoryInformation using(userid)
left join committee on committee.id=committeeMember.committeeid order by
committeeName asc
  &lt;/esql:query&gt;
  &lt;esql:results&gt;
    &lt;esql:row-results&gt;
      &lt;esql:group group-on="committeeName"&gt;
        &lt;h2&gt;&lt;esql:get-string column="committeeName"/&gt;&lt;/h2&gt;
        &lt;ul&gt;
          &lt;esql:member&gt;
            &lt;li&gt;
              &lt;esql:get-string column="title"/&gt;
              &lt;esql:get-string column="firstName"/&gt;
              &lt;esql:get-string column="middleName"/&gt;
              &lt;esql:get-string column="lastName"/&gt;
              &lt;esql:get-string column="suffix"/&gt;
            &lt;/li&gt;
          &lt;/esql:member&gt;
        &lt;/ul&gt;
      &lt;/esql:group&gt;
    &lt;/esql:row-results&gt;
  &lt;/esql:results&gt;
&lt;/esql:execute-query&gt;
          </pre>
</td><td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
</table>
</div>

          
<p align="justify">The ultimate reference, is of course the source code, which is an XSLT logicsheet contained in the
          file <code><font face="courier, monospaced">src/org/apache/cocoon/components/language/markup/xsp/java/esql.xsl</font></code>
</p>

          
<p align="justify">Of course, we would be very grateful for any improvements on this documentation
            or further examples - please send them to
           <a href="mailto:cocoon-users@xml.apache.org">cocoon-users@xml.apache.org</a>!</p>

	
</font></td>
</tr>
</table>
</div>
<br>


    
<div align="right">
<table cellpadding="0" cellspacing="0" width="98%" border="0">
<tr>
<td align="right" valign="bottom" height="7" width="9"><img border="0" hspace="0" vspace="0" height="7" width="9" src="images/bar-top-left.gif"></td><td background="images/bar-border-top.gif"><img border="0" hspace="0" vspace="0" height="5" width="1" src="images/void.gif"></td><td align="left" valign="bottom" height="7" width="9"><img border="0" hspace="0" vspace="0" height="7" width="9" src="images/bar-top-right.gif"></td>
</tr>
<tr>
<td background="images/bar-border-left.gif" width="9"><img border="0" hspace="0" vspace="0" height="1" width="9" src="images/void.gif"></td><td bgcolor="#0086b2" width="100%"><font color="#ffffff" face="arial,helvetica,sanserif" size="+1"><img border="0" hspace="0" vspace="0" height="5" width="5" src="images/void.gif"><b>Template Descriptions</b></font></td><td background="images/bar-border-right.gif" width="9"><img border="0" hspace="0" vspace="0" height="1" width="9" src="images/void.gif"></td>
</tr>
<tr>
<td align="right" valign="top" height="12" width="9"><img border="0" hspace="0" vspace="0" height="12" width="9" src="images/bar-bottom-left.gif"></td><td background="images/bar-border-bottom.gif"><img border="0" hspace="0" vspace="0" height="12" src="images/void.gif"></td><td align="left" valign="top" height="12" width="9"><img border="0" hspace="0" vspace="0" height="12" width="9" src="images/bar-bottom-right.gif"></td>
</tr>
</table>
<table cellpadding="0" cellspacing="0" width="98%" border="0">
<tr>
<td><font color="#000000" face="arial,helvetica,sanserif">
      
<table cellpadding="2" cellspacing="2" border="0" width="100%">
<caption></caption>
          
<tr>
           
<td align="center" valign="center" rowspan="1" colspan="1" bgcolor="#039acc"><font face="arial,helvetica,sanserif" size="-1" color="#ffffff"><b>Tag</b>&nbsp;
      </font></td>
           <td align="center" valign="center" rowspan="1" colspan="1" bgcolor="#039acc"><font face="arial,helvetica,sanserif" size="-1" color="#ffffff"><b>Description</b>&nbsp;
      </font></td>
          
</tr>
          
<tr>
<td align="left" valign="top" rowspan="1" colspan="1" bgcolor="#a0ddf0"><font face="arial,helvetica,sanserif" size="-1" color="#000000">esql:row-results//esql:get-columns&nbsp;
      </font></td>
          <td align="left" valign="top" rowspan="1" colspan="1" bgcolor="#a0ddf0"><font face="arial,helvetica,sanserif" size="-1" color="#000000">results in a set of elements whose names are the names of the columns. the elements each have one text child, whose value is the value of the column interpreted as a string. No special formatting is allowed here. If you want to mess around with the names of the elements or the value of the text field, use the type-specific get methods and write out the result fragment yourself. For Cocoon 2 only, this outputs structured types as well. Here sql-list or sql-set contains several sql-list-item or sql-set-item element that again contain the actual data.&nbsp;
      </font></td>
          
</tr>
          
<tr>
<td align="left" valign="top" rowspan="1" colspan="1" bgcolor="#a0ddf0"><font face="arial,helvetica,sanserif" size="-1" color="#000000">esql:row-results//esql:get-string&nbsp;
      </font></td>
          <td align="left" valign="top" rowspan="1" colspan="1" bgcolor="#a0ddf0"><font face="arial,helvetica,sanserif" size="-1" color="#000000">returns the value of the given column as a string&nbsp;
      </font></td>
          
</tr>
          
<tr>
<td align="left" valign="top" rowspan="1" colspan="1" bgcolor="#a0ddf0"><font face="arial,helvetica,sanserif" size="-1" color="#000000">esql:row-results//esql:get-date&nbsp;
      </font></td>
          <td align="left" valign="top" rowspan="1" colspan="1" bgcolor="#a0ddf0"><font face="arial,helvetica,sanserif" size="-1" color="#000000">returns the value of the given column as a date. if a format attribute exists, its value is taken to be a date format string as defined in java.text.SimpleDateFormat, and the result is formatted accordingly.&nbsp;
      </font></td>
          
</tr>
          
<tr>
<td align="left" valign="top" rowspan="1" colspan="1" bgcolor="#a0ddf0"><font face="arial,helvetica,sanserif" size="-1" color="#000000">esql:row-results//esql:get-time&nbsp;
      </font></td>
          <td align="left" valign="top" rowspan="1" colspan="1" bgcolor="#a0ddf0"><font face="arial,helvetica,sanserif" size="-1" color="#000000">returns the value of the given column as a time. if a format attribute exists, its value is taken to be a date format string as defined in java.text.SimpleDateFormat, and the result is formatted accordingly.&nbsp;
      </font></td>
          
</tr>
          
<tr>
<td align="left" valign="top" rowspan="1" colspan="1" bgcolor="#a0ddf0"><font face="arial,helvetica,sanserif" size="-1" color="#000000">esql:row-results//esql:get-timestamp&nbsp;
      </font></td>
          <td align="left" valign="top" rowspan="1" colspan="1" bgcolor="#a0ddf0"><font face="arial,helvetica,sanserif" size="-1" color="#000000">returns the value of the given column as a timestamp. if a format attribute exists, its value is taken to be a date format string as defined in java.text.SimpleDateFormat, and the result is formatted accordingly.&nbsp;
      </font></td>
          
</tr>
          
<tr>
<td align="left" valign="top" rowspan="1" colspan="1" bgcolor="#a0ddf0"><font face="arial,helvetica,sanserif" size="-1" color="#000000">esql:row-results//esql:get-boolean&nbsp;
      </font></td>
          <td align="left" valign="top" rowspan="1" colspan="1" bgcolor="#a0ddf0"><font face="arial,helvetica,sanserif" size="-1" color="#000000">returns the value of the given column as true or false&nbsp;
      </font></td>
          
</tr>
          
<tr>
<td align="left" valign="top" rowspan="1" colspan="1" bgcolor="#a0ddf0"><font face="arial,helvetica,sanserif" size="-1" color="#000000">esql:row-results//esql:get-double&nbsp;
      </font></td>
          <td align="left" valign="top" rowspan="1" colspan="1" bgcolor="#a0ddf0"><font face="arial,helvetica,sanserif" size="-1" color="#000000">returns the value of the given column as a double. if a format attribute exists, its value is taken to be a decimal format string as defined in java.text.DecimalFormat, and the result is formatted accordingly.&nbsp;
      </font></td>
          
</tr>
          
<tr>
<td align="left" valign="top" rowspan="1" colspan="1" bgcolor="#a0ddf0"><font face="arial,helvetica,sanserif" size="-1" color="#000000">esql:row-results//esql:get-float&nbsp;
      </font></td>
          <td align="left" valign="top" rowspan="1" colspan="1" bgcolor="#a0ddf0"><font face="arial,helvetica,sanserif" size="-1" color="#000000">returns the value of the given column as a float. if a format attribute exists, its value is taken to be a decimal format string as defined in java.text.DecimalFormat, and the result is formatted accordingly.&nbsp;
      </font></td>
          
</tr>
          
<tr>
<td align="left" valign="top" rowspan="1" colspan="1" bgcolor="#a0ddf0"><font face="arial,helvetica,sanserif" size="-1" color="#000000">esql:row-results//esql:get-int&nbsp;
      </font></td>
          <td align="left" valign="top" rowspan="1" colspan="1" bgcolor="#a0ddf0"><font face="arial,helvetica,sanserif" size="-1" color="#000000">returns the value of the given column as an integer&nbsp;
      </font></td>
          
</tr>
          
<tr>
<td align="left" valign="top" rowspan="1" colspan="1" bgcolor="#a0ddf0"><font face="arial,helvetica,sanserif" size="-1" color="#000000">esql:row-results//esql:get-long&nbsp;
      </font></td>
          <td align="left" valign="top" rowspan="1" colspan="1" bgcolor="#a0ddf0"><font face="arial,helvetica,sanserif" size="-1" color="#000000">returns the value of the given column as a long&nbsp;
      </font></td>
          
</tr>
          
<tr>
<td align="left" valign="top" rowspan="1" colspan="1" bgcolor="#a0ddf0"><font face="arial,helvetica,sanserif" size="-1" color="#000000">esql:row-results//esql:get-short&nbsp;
      </font></td>
          <td align="left" valign="top" rowspan="1" colspan="1" bgcolor="#a0ddf0"><font face="arial,helvetica,sanserif" size="-1" color="#000000">returns the value of the given column as a short&nbsp;
      </font></td>
          
</tr>
          
<tr>
<td align="left" valign="top" rowspan="1" colspan="1" bgcolor="#a0ddf0"><font face="arial,helvetica,sanserif" size="-1" color="#000000">esql:row-results//esql:get-ascii&nbsp;
      </font></td>
          <td align="left" valign="top" rowspan="1" colspan="1" bgcolor="#a0ddf0"><font face="arial,helvetica,sanserif" size="-1" color="#000000">returns the value of the given column as a clob&nbsp;
      </font></td>
          
</tr>
          
<tr>
<td align="left" valign="top" rowspan="1" colspan="1" bgcolor="#a0ddf0"><font face="arial,helvetica,sanserif" size="-1" color="#000000">esql:row-results//esql:get-object&nbsp;
      </font></td>
          <td align="left" valign="top" rowspan="1" colspan="1" bgcolor="#a0ddf0"><font face="arial,helvetica,sanserif" size="-1" color="#000000">returns the value of the given column as an object&nbsp;
      </font></td>
          
</tr>
          
<tr>
<td align="left" valign="top" rowspan="1" colspan="1" bgcolor="#a0ddf0"><font face="arial,helvetica,sanserif" size="-1" color="#000000">esql:row-results//esql:get-array&nbsp;
      </font></td>
          <td align="left" valign="top" rowspan="1" colspan="1" bgcolor="#a0ddf0"><font face="arial,helvetica,sanserif" size="-1" color="#000000">returns the value of the given column as an java.sql.Array. This is frequently used for collection 
	      datatypes like lists, sets, bags etc.&nbsp;
      </font></td>
          
</tr>
          
<tr>
<td align="left" valign="top" rowspan="1" colspan="1" bgcolor="#a0ddf0"><font face="arial,helvetica,sanserif" size="-1" color="#000000">esql:row-results//esql:get-struct&nbsp;
      </font></td>
          <td align="left" valign="top" rowspan="1" colspan="1" bgcolor="#a0ddf0"><font face="arial,helvetica,sanserif" size="-1" color="#000000">returns the value of the given column as a java.sql.Struct. This is frequently used for row types.&nbsp;
      </font></td>
          
</tr>
          
<tr>
<td align="left" valign="top" rowspan="1" colspan="1" bgcolor="#a0ddf0"><font face="arial,helvetica,sanserif" size="-1" color="#000000">esql:row-results//esql:get-xml&nbsp;
      </font></td>
          <td align="left" valign="top" rowspan="1" colspan="1" bgcolor="#a0ddf0"><font face="arial,helvetica,sanserif" size="-1" color="#000000">returns the value of the given column interpreted as an xml fragment.
 The fragment is parsed by the default xsp parser and the document element is returned.
 If a root attribute exists, its value is taken to be the name of an element to wrap around the contents of
 the fragment before parsing.&nbsp;
      </font></td>
 
</tr>
          
<tr>
<td align="left" valign="top" rowspan="1" colspan="1" bgcolor="#a0ddf0"><font face="arial,helvetica,sanserif" size="-1" color="#000000">esql:results//esql:get-column-count&nbsp;
      </font></td>
          <td align="left" valign="top" rowspan="1" colspan="1" bgcolor="#a0ddf0"><font face="arial,helvetica,sanserif" size="-1" color="#000000">returns the number of columns in the resultset.&nbsp;
      </font></td>
          
</tr>
          
<tr>
<td align="left" valign="top" rowspan="1" colspan="1" bgcolor="#a0ddf0"><font face="arial,helvetica,sanserif" size="-1" color="#000000">esql:row-results//esql:get-row-position|esql:results//esql:get-row-position&nbsp;
      </font></td>
          <td align="left" valign="top" rowspan="1" colspan="1" bgcolor="#a0ddf0"><font face="arial,helvetica,sanserif" size="-1" color="#000000">returns the position of the current row in the result set&nbsp;
      </font></td>
          
</tr>
          
<tr>
<td align="left" valign="top" rowspan="1" colspan="1" bgcolor="#a0ddf0"><font face="arial,helvetica,sanserif" size="-1" color="#000000">esql:row-results//esql:get-column-name&nbsp;
      </font></td>
          <td align="left" valign="top" rowspan="1" colspan="1" bgcolor="#a0ddf0"><font face="arial,helvetica,sanserif" size="-1" color="#000000">returns the name of the given column. the column must be specified by number, not name.&nbsp;
      </font></td>
          
</tr>
          
<tr>
<td align="left" valign="top" rowspan="1" colspan="1" bgcolor="#a0ddf0"><font face="arial,helvetica,sanserif" size="-1" color="#000000">esql:row-results//esql:get-column-label&nbsp;
      </font></td>
          <td align="left" valign="top" rowspan="1" colspan="1" bgcolor="#a0ddf0"><font face="arial,helvetica,sanserif" size="-1" color="#000000">returns the label of the given column. the column must be specified by number, not name.&nbsp;
      </font></td>
          
</tr>
          
<tr>
<td align="left" valign="top" rowspan="1" colspan="1" bgcolor="#a0ddf0"><font face="arial,helvetica,sanserif" size="-1" color="#000000">esql:row-results//esql:get-column-type-name&nbsp;
      </font></td>
          <td align="left" valign="top" rowspan="1" colspan="1" bgcolor="#a0ddf0"><font face="arial,helvetica,sanserif" size="-1" color="#000000">returns the name of the type of the given column. the column must be specified by number, not name.&nbsp;
      </font></td>
          
</tr>
          
<tr>
<td align="left" valign="top" rowspan="1" colspan="1" bgcolor="#a0ddf0"><font face="arial,helvetica,sanserif" size="-1" color="#000000">esql:row-results//esql:is-null&nbsp;
      </font></td>
          <td align="left" valign="top" rowspan="1" colspan="1" bgcolor="#a0ddf0"><font face="arial,helvetica,sanserif" size="-1" color="#000000">allows null-column testing. Evaluates to a Java expression, which is true when the referred column contains a null-value for the current resultset row&nbsp;
      </font></td>
          
</tr>
          
<tr>
<td align="left" valign="top" rowspan="1" colspan="1" bgcolor="#a0ddf0"><font face="arial,helvetica,sanserif" size="-1" color="#000000">esql:error-results//esql:get-message&nbsp;
      </font></td>
          <td align="left" valign="top" rowspan="1" colspan="1" bgcolor="#a0ddf0"><font face="arial,helvetica,sanserif" size="-1" color="#000000">returns the message of the current exception&nbsp;
      </font></td>
          
</tr>
          
<tr>
<td align="left" valign="top" rowspan="1" colspan="1" bgcolor="#a0ddf0"><font face="arial,helvetica,sanserif" size="-1" color="#000000">esql:error-results//esql:to-string&nbsp;
      </font></td>
          <td align="left" valign="top" rowspan="1" colspan="1" bgcolor="#a0ddf0"><font face="arial,helvetica,sanserif" size="-1" color="#000000">returns the current exception as a string&nbsp;
      </font></td>
          
</tr>
          
<tr>
<td align="left" valign="top" rowspan="1" colspan="1" bgcolor="#a0ddf0"><font face="arial,helvetica,sanserif" size="-1" color="#000000">esql:error-results//esql:get-stacktrace&nbsp;
      </font></td>
          <td align="left" valign="top" rowspan="1" colspan="1" bgcolor="#a0ddf0"><font face="arial,helvetica,sanserif" size="-1" color="#000000">returns the stacktrace of the current exception&nbsp;
      </font></td>
          
</tr>
          
<tr>
<td align="left" valign="top" rowspan="1" colspan="1" bgcolor="#a0ddf0"><font face="arial,helvetica,sanserif" size="-1" color="#000000">esql:results/esql:get-metadata&nbsp;
      </font></td>
          <td align="left" valign="top" rowspan="1" colspan="1" bgcolor="#a0ddf0"><font face="arial,helvetica,sanserif" size="-1" color="#000000">returns the metadata associated with the current resultset&nbsp;
      </font></td>
          
</tr>
          
<tr>
<td align="left" valign="top" rowspan="1" colspan="1" bgcolor="#a0ddf0"><font face="arial,helvetica,sanserif" size="-1" color="#000000">esql:results/esql:get-resultset&nbsp;
      </font></td>
          <td align="left" valign="top" rowspan="1" colspan="1" bgcolor="#a0ddf0"><font face="arial,helvetica,sanserif" size="-1" color="#000000">returns the current resultset&nbsp;
      </font></td>
          
</tr>
	  
<tr>
<td align="left" valign="top" rowspan="1" colspan="1" bgcolor="#a0ddf0"><font face="arial,helvetica,sanserif" size="-1" color="#000000">esql:group&nbsp;
      </font></td>
	  <td align="left" valign="top" rowspan="1" colspan="1" bgcolor="#a0ddf0"><font face="arial,helvetica,sanserif" size="-1" color="#000000">Allows header and footer elements around groups of consecutive records with identical values in column named by @group-on.  Facilitates a single query with joins to be used in lieu of some nested queries.&nbsp;
      </font></td>
          
</tr>
	  
<tr>
<td align="left" valign="top" rowspan="1" colspan="1" bgcolor="#a0ddf0"><font face="arial,helvetica,sanserif" size="-1" color="#000000">esql:member&nbsp;
      </font></td>
	  <td align="left" valign="top" rowspan="1" colspan="1" bgcolor="#a0ddf0"><font face="arial,helvetica,sanserif" size="-1" color="#000000">Used in conjunction with and nested inside esql:group.  Formatting for individual records goes within esql:member. Header and footer stuff goes in between group and member.&nbsp;
      </font></td>
	  
</tr>
          
<tr>
<td align="left" valign="top" rowspan="1" colspan="1" bgcolor="#a0ddf0"><font face="arial,helvetica,sanserif" size="-1" color="#000000">@*|node()&nbsp;
      </font></td>
          <td align="left" valign="top" rowspan="1" colspan="1" bgcolor="#a0ddf0"><font face="arial,helvetica,sanserif" size="-1" color="#000000">used internally to determine which column is the given column. if a column attribute exists and its value is a number, it is taken to be the column's position. if the value is not a number, it is taken to be the column's name. if a column attribute does not exist, an esql:column element is assumed to exist and to render as a string (after all of the xsp instructions have been evaluated), which is taken to be the column's name.&nbsp;
      </font></td>
          
</tr>
       
</table>
      
</font></td>
</tr>
</table>
</div>
<br>


</td>
</tr>
</table>
</td>
</tr>
</table>
<table width="100%" cellspacing="0" cellpadding="0" border="0">
<tr>
<td bgcolor="#0086b2"><img width="1" src="images/dot.gif" height="1"></td>
</tr>
<tr>
<td align="center"><font size="-1" face="arial,helvetica,sanserif" color="#0086b2"><i>Copyright &copy; 1999-2002 The Apache Software Foundation. All Rights Reserved.</i></font></td>
</tr>
</table>
</body>
</html>
