<html xmlns:NetUtils="org.apache.cocoon.util.NetUtils">
<head>
<META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Using Form Validation</title>
<script type="text/javascript" src="resources/script.js" language="JavaScript"></script>
</head>
<body bgcolor="#ffffff" marginheight="4" marginwidth="4" leftmargin="4" topmargin="4" alink="#cc0000" vlink="#0086b2" link="#039acc" text="#000000">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td align="left" valign="top" rowspan="3" height="60" width="135"><img border="0" vspace="0" hspace="0" src="images/logo.gif" height="60" width="135"></td><td background="images/line.gif" colspan="2" align="left" valign="top" height="5" width="100%"><img align="left" border="0" vspace="0" hspace="0" src="images/line.gif" height="5" width="1"></td><td align="left" valign="top" rowspan="3" height="60" width="29"><img border="0" vspace="0" hspace="0" src="images/right.gif" height="60" width="29"></td>
</tr>
<tr>
<td bgcolor="#0086b2" colspan="2" align="right" valign="top" height="35" width="100%"><img align="right" alt="Using Form Validation" border="0" vspace="0" hspace="0" src="graphics/logicsheet-forms-header.jpg_label=Using%20Form%20Validation.jpg"></td>
</tr>
<tr>
<td background="images/bottom.gif" bgcolor="#0086b2" align="left" valign="top" height="20" width="100%"><img align="left" border="0" vspace="0" hspace="0" src="images/bottom.gif" height="20" width="3"></td><td background="images/bottom.gif" width="288" valign="top" height="20" bgcolor="#0086b2" align="right">
<table width="288" cellspacing="0" cellpadding="0" border="0">
<tr>
<td align="left" valign="top" height="20" width="96"><a onMouseOver="rolloverOn('xml');" onMouseOut="rolloverOff('xml');" target="new" href="http://xml.apache.org/"><img onLoad="rolloverLoad('xml', 'images/button-xml-hi.gif', 'images/button-xml-lo.gif');" border="0" vspace="0" hspace="0" name="xml" src="images/button-xml-lo.gif" height="20" width="96" alt="http://xml.apache.org/"></a></td><td align="left" valign="top" height="20" width="96"><a onMouseOver="rolloverOn('asf');" onMouseOut="rolloverOff('asf');" target="new" href="http://www.apache.org/"><img onLoad="rolloverLoad('asf', 'images/button-asf-hi.gif', 'images/button-asf-lo.gif');" border="0" vspace="0" hspace="0" name="asf" src="images/button-asf-lo.gif" height="20" width="96" alt="http://www.apache.org/"></a></td><td align="left" valign="top" height="20" width="96"><a onMouseOver="rolloverOn('w3c');" onMouseOut="rolloverOff('w3c');" target="new" href="http://www.w3.org/"><img onLoad="rolloverLoad('w3c', 'images/button-w3c-hi.gif', 'images/button-w3c-lo.gif');" border="0" vspace="0" hspace="0" name="w3c" src="images/button-w3c-lo.gif" height="20" width="96" alt="http://www.w3.org/"></a></td>
</tr>
</table>
</td>
</tr>
</table>
<table width="100%" cellspacing="0" cellpadding="0" border="0">
<tr width="100%">
<td valign="top" width="120">
<table width="120" cellspacing="0" cellpadding="0" border="0">
<tr>
<td valign="top" align="left"><img width="120" vspace="0" src="images/join.gif" hspace="0" height="14" border="0"><br>
</td>
</tr>
<tr>
<td valign="top" align="left"><a onMouseOver="rolloverOn('Main')" onMouseOut="rolloverOff('Main')" href="../../index.html"><img onLoad="rolloverLoad('Main', 'graphics/Main-label_over.jpg', 'graphics/Main-label.jpg');" vspace="0" hspace="0" name="Main" width="120" height="12" border="0" src="graphics/Main-label.jpg" alt="Main"></a></td>
</tr>
<tr>
<td valign="top" align="left"><a onMouseOver="rolloverOn('User Documentation')" onMouseOut="rolloverOff('User Documentation')" href="../index.html"><img onLoad="rolloverLoad('User Documentation', 'graphics/User%20Documentation-label_over.jpg', 'graphics/User%20Documentation-label.jpg');" vspace="0" hspace="0" name="User Documentation" width="120" height="12" border="0" src="graphics/User%20Documentation-label.jpg" alt="User Documentation"></a></td>
</tr>
<tr>
<td valign="top" align="left"><img alt="XSP" width="120" vspace="0" src="graphics/XSP-separator.jpg" hspace="0" height="20" border="0"><br>
</td>
</tr>
<tr>
<td valign="top" align="left"><a onMouseOver="rolloverOn('XSP')" onMouseOut="rolloverOff('XSP')" href="xsp.html"><img onLoad="rolloverLoad('XSP', 'graphics/XSP-label_over.jpg', 'graphics/XSP-label.jpg');" vspace="0" hspace="0" name="XSP" width="120" height="12" border="0" src="graphics/XSP-label.jpg" alt="XSP"></a></td>
</tr>
<tr>
<td valign="top" align="left"><a onMouseOver="rolloverOn('XSP Internals')" onMouseOut="rolloverOff('XSP Internals')" href="xsp-internals.html"><img onLoad="rolloverLoad('XSP Internals', 'graphics/XSP%20Internals-label_over.jpg', 'graphics/XSP%20Internals-label.jpg');" vspace="0" hspace="0" name="XSP Internals" width="120" height="12" border="0" src="graphics/XSP%20Internals-label.jpg" alt="XSP Internals"></a></td>
</tr>
<tr>
<td valign="top" align="left"><a onMouseOver="rolloverOn('XSP Logicsheets')" onMouseOut="rolloverOff('XSP Logicsheets')" href="logicsheet-concepts.html"><img onLoad="rolloverLoad('XSP Logicsheets', 'graphics/XSP%20Logicsheets-label_over.jpg', 'graphics/XSP%20Logicsheets-label.jpg');" vspace="0" hspace="0" name="XSP Logicsheets" width="120" height="12" border="0" src="graphics/XSP%20Logicsheets-label.jpg" alt="XSP Logicsheets"></a></td>
</tr>
<tr>
<td valign="top" align="left"><a onMouseOver="rolloverOn('XSP Guide')" onMouseOut="rolloverOff('XSP Guide')" href="logicsheet.html"><img onLoad="rolloverLoad('XSP Guide', 'graphics/XSP%20Guide-label_over.jpg', 'graphics/XSP%20Guide-label.jpg');" vspace="0" hspace="0" name="XSP Guide" width="120" height="12" border="0" src="graphics/XSP%20Guide-label.jpg" alt="XSP Guide"></a></td>
</tr>
<tr>
<td valign="top" align="left"><a onMouseOver="rolloverOn('Session Logicsheet')" onMouseOut="rolloverOff('Session Logicsheet')" href="session.html"><img onLoad="rolloverLoad('Session Logicsheet', 'graphics/Session%20Logicsheet-label_over.jpg', 'graphics/Session%20Logicsheet-label.jpg');" vspace="0" hspace="0" name="Session Logicsheet" width="120" height="12" border="0" src="graphics/Session%20Logicsheet-label.jpg" alt="Session Logicsheet"></a></td>
</tr>
<tr>
<td valign="top" align="left"><a onMouseOver="rolloverOn('Sessions')" onMouseOut="rolloverOff('Sessions')" href="sessions.html"><img onLoad="rolloverLoad('Sessions', 'graphics/Sessions-label_over.jpg', 'graphics/Sessions-label.jpg');" vspace="0" hspace="0" name="Sessions" width="120" height="12" border="0" src="graphics/Sessions-label.jpg" alt="Sessions"></a></td>
</tr>
<tr>
<td valign="top" align="left"><a onMouseOver="rolloverOn('Request Logicsheet')" onMouseOut="rolloverOff('Request Logicsheet')" href="request.html"><img onLoad="rolloverLoad('Request Logicsheet', 'graphics/Request%20Logicsheet-label_over.jpg', 'graphics/Request%20Logicsheet-label.jpg');" vspace="0" hspace="0" name="Request Logicsheet" width="120" height="12" border="0" src="graphics/Request%20Logicsheet-label.jpg" alt="Request Logicsheet"></a></td>
</tr>
<tr>
<td valign="top" align="left"><a onMouseOver="rolloverOn('ESQL Logicsheet')" onMouseOut="rolloverOff('ESQL Logicsheet')" href="esql.html"><img onLoad="rolloverLoad('ESQL Logicsheet', 'graphics/ESQL%20Logicsheet-label_over.jpg', 'graphics/ESQL%20Logicsheet-label.jpg');" vspace="0" hspace="0" name="ESQL Logicsheet" width="120" height="12" border="0" src="graphics/ESQL%20Logicsheet-label.jpg" alt="ESQL Logicsheet"></a></td>
</tr>
<tr>
<td valign="top" align="left"><a onMouseOver="rolloverOn('Forms')" onMouseOut="rolloverOff('Forms')" href="logicsheet-forms.html"><img onLoad="rolloverLoad('Forms', 'graphics/Forms-label_over.jpg', 'graphics/Forms-label.jpg');" vspace="0" hspace="0" name="Forms" width="120" height="12" border="0" src="graphics/Forms-label.jpg" alt="Forms"></a></td>
</tr>
<tr>
<td align="left" valign="top"><img width="120" vspace="0" src="images/close.gif" hspace="0" height="14" border="0"><br>
</td>
</tr>
</table>
</td><td>
<table cellspacing="0" cellpadding="0" border="0">
<tr>
<td height="10" width="100%"></td>
</tr>
<tr>
<td> 
   
   
   
<div align="right">
<table cellpadding="0" cellspacing="0" width="98%" border="0">
<tr>
<td align="right" valign="bottom" height="7" width="9"><img border="0" hspace="0" vspace="0" height="7" width="9" src="images/bar-top-left.gif"></td><td background="images/bar-border-top.gif"><img border="0" hspace="0" vspace="0" height="5" width="1" src="images/void.gif"></td><td align="left" valign="bottom" height="7" width="9"><img border="0" hspace="0" vspace="0" height="7" width="9" src="images/bar-top-right.gif"></td>
</tr>
<tr>
<td background="images/bar-border-left.gif" width="9"><img border="0" hspace="0" vspace="0" height="1" width="9" src="images/void.gif"></td><td bgcolor="#0086b2" width="100%"><font color="#ffffff" face="arial,helvetica,sanserif" size="+1"><img border="0" hspace="0" vspace="0" height="5" width="5" src="images/void.gif"><b>Introduction</b></font></td><td background="images/bar-border-right.gif" width="9"><img border="0" hspace="0" vspace="0" height="1" width="9" src="images/void.gif"></td>
</tr>
<tr>
<td align="right" valign="top" height="12" width="9"><img border="0" hspace="0" vspace="0" height="12" width="9" src="images/bar-bottom-left.gif"></td><td background="images/bar-border-bottom.gif"><img border="0" hspace="0" vspace="0" height="12" src="images/void.gif"></td><td align="left" valign="top" height="12" width="9"><img border="0" hspace="0" vspace="0" height="12" width="9" src="images/bar-bottom-right.gif"></td>
</tr>
</table>
<table cellpadding="0" cellspacing="0" width="98%" border="0">
<tr>
<td><font color="#000000" face="arial,helvetica,sanserif">
   
<p align="justify">
   For most web applications input is essential. Apache Cocoon provides a
   variety of modules to support basic interaction like simple syntax
   checking of input data or writing input data to databases.
   </p>
   
<p align="justify">
   This is about syntax checking. See
   org.apache.cocoon.acting.DatabaseAbstractAction (in javadocs) for
   details on database interaction.
   </p>
    
<p align="justify">
    FormValidatorAction communicates to the application a verbose
    error status through an request attribute. In addition a taglib
    allows easy access to the results. On top of that this taglib
    gives access to the attributes for parameters declared in those
    sections in descriptor.xml relevant to the validation process.
    </p>
    
<div align="right">
<table cellpadding="0" cellspacing="0" width="95%" border="0">
<tr>
<td align="right" valign="bottom" height="7" width="9"><img border="0" hspace="0" vspace="0" height="7" width="9" src="images/bar-top-left.gif"></td><td background="images/bar-border-top.gif"><img border="0" hspace="0" vspace="0" height="5" width="1" src="images/void.gif"></td><td align="left" valign="bottom" height="7" width="9"><img border="0" hspace="0" vspace="0" height="7" width="9" src="images/bar-top-right.gif"></td>
</tr>
<tr>
<td background="images/bar-border-left.gif" width="9"><img border="0" hspace="0" vspace="0" height="1" width="9" src="images/void.gif"></td><td bgcolor="#0086b2" width="100%"><font color="#ffffff" face="arial,helvetica,sanserif"><img border="0" hspace="0" vspace="0" height="5" width="5" src="images/void.gif"><b>The Descriptor File</b></font></td><td background="images/bar-border-right.gif" width="9"><img border="0" hspace="0" vspace="0" height="1" width="9" src="images/void.gif"></td>
</tr>
<tr>
<td align="right" valign="top" height="12" width="9"><img border="0" hspace="0" vspace="0" height="12" width="9" src="images/bar-bottom-left.gif"></td><td background="images/bar-border-bottom.gif"><img border="0" hspace="0" vspace="0" height="12" width="1" src="images/void.gif"></td><td align="left" valign="top" height="12" width="9"><img border="0" hspace="0" vspace="0" height="12" width="9" src="images/bar-bottom-right.gif"></td>
</tr>
</table>
<table cellpadding="0" cellspacing="0" width="95%" border="0">
<tr>
<td><font color="#000000" face="arial,helvetica,sanserif">
    
<p align="justify">
    For details on the syntax of the descriptor file see
    javadocs. Basically it consists of two sections, a list of
    parameters and their properties and a list of constraints or
    constraint sets. The file syntax is set up so that it can be
    shared with the database actions.
    </p>
     
<div align="center">
<table border="0" cellpadding="0" cellspacing="4">
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td bgcolor="#ffffff">
<pre>

&lt;?xml version="1.0"?&gt;
&lt;root&gt;

  &lt;parameter name="persons" type="long" min="1" default="4" nullable="no"/&gt;
  &lt;parameter name="deposit" type="double" min="10.0" max="999.99"/&gt;
  &lt;parameter name="email" type="string" max-len="50"
             matches-regex="^[\d\w][\d\w\-_\.]*@([\d\w\-_]+\.)\w\w\w?$"&gt;

  &lt;constraint-set name="car-reservation"&gt;
    &lt;validate name="persons"/&gt;
    &lt;validate name="deposit" min="50.0"/&gt;
    &lt;validate name="email"/&gt;
  &lt;/constraint-set&gt;

&lt;/root&gt;

     </pre>
</td><td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
</table>
</div>
    
<p align="justify">
    The above could for example describe expected input from a reservation
    form. Specifications in a constraint set take precedence over
    the general ones.
    </p>
    
</font></td>
</tr>
</table>
</div>
<br>
    
<div align="right">
<table cellpadding="0" cellspacing="0" width="95%" border="0">
<tr>
<td align="right" valign="bottom" height="7" width="9"><img border="0" hspace="0" vspace="0" height="7" width="9" src="images/bar-top-left.gif"></td><td background="images/bar-border-top.gif"><img border="0" hspace="0" vspace="0" height="5" width="1" src="images/void.gif"></td><td align="left" valign="bottom" height="7" width="9"><img border="0" hspace="0" vspace="0" height="7" width="9" src="images/bar-top-right.gif"></td>
</tr>
<tr>
<td background="images/bar-border-left.gif" width="9"><img border="0" hspace="0" vspace="0" height="1" width="9" src="images/void.gif"></td><td bgcolor="#0086b2" width="100%"><font color="#ffffff" face="arial,helvetica,sanserif"><img border="0" hspace="0" vspace="0" height="5" width="5" src="images/void.gif"><b>Sitemap Usage</b></font></td><td background="images/bar-border-right.gif" width="9"><img border="0" hspace="0" vspace="0" height="1" width="9" src="images/void.gif"></td>
</tr>
<tr>
<td align="right" valign="top" height="12" width="9"><img border="0" hspace="0" vspace="0" height="12" width="9" src="images/bar-bottom-left.gif"></td><td background="images/bar-border-bottom.gif"><img border="0" hspace="0" vspace="0" height="12" width="1" src="images/void.gif"></td><td align="left" valign="top" height="12" width="9"><img border="0" hspace="0" vspace="0" height="12" width="9" src="images/bar-bottom-right.gif"></td>
</tr>
</table>
<table cellpadding="0" cellspacing="0" width="95%" border="0">
<tr>
<td><font color="#000000" face="arial,helvetica,sanserif">
    
<p align="justify">
    To take advantage of the form validator action create two
    pages. One for the input form and one indicating the acceptance of
    the reservation. Create a pipeline in your sitemap so that the
    confirmation page is only shown when the action completed
    successfully and the input form is returned otherwise.
    </p>
     
<div align="center">
<table border="0" cellpadding="0" cellspacing="4">
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td bgcolor="#ffffff">
<pre>

&lt;?xml version="1.0"?&gt;
   &lt;map:match pattern="car-reservation"&gt;
     &lt;map:act type="form-validator"&gt;
        &lt;!-- add you favourite database action here --&gt;
        &lt;map:parameter name="descriptor" value="descriptor.xml"/&gt;
        &lt;map:parameter name="validate-set" value="car-reservation"/&gt;
	&lt;map:generate type="serverpages" src="OK.xsp"/&gt;
	&lt;map:transform src="stylesheets/dynamic-page2html.xsl"/&gt;
	&lt;map:serialize/&gt;
     &lt;/map:act&gt;
     &lt;map:generate type="serverpages" src="test/ERROR.xsp"/&gt;
     &lt;map:transform src="stylesheets/dynamic-page2html.xsl"/&gt;
     &lt;map:serialize/&gt;
   &lt;/map:match&gt;

     </pre>
</td><td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
</table>
</div>
     
<p align="justify">
     Note here that you may not use a redirection to point to the
     pages if you would like to access the validation results e.g. on
     the error page. A redirection would create a new request object
     and thus discard the validation results.
     </p>
    
</font></td>
</tr>
</table>
</div>
<br>
    
<div align="right">
<table cellpadding="0" cellspacing="0" width="95%" border="0">
<tr>
<td align="right" valign="bottom" height="7" width="9"><img border="0" hspace="0" vspace="0" height="7" width="9" src="images/bar-top-left.gif"></td><td background="images/bar-border-top.gif"><img border="0" hspace="0" vspace="0" height="5" width="1" src="images/void.gif"></td><td align="left" valign="bottom" height="7" width="9"><img border="0" hspace="0" vspace="0" height="7" width="9" src="images/bar-top-right.gif"></td>
</tr>
<tr>
<td background="images/bar-border-left.gif" width="9"><img border="0" hspace="0" vspace="0" height="1" width="9" src="images/void.gif"></td><td bgcolor="#0086b2" width="100%"><font color="#ffffff" face="arial,helvetica,sanserif"><img border="0" hspace="0" vspace="0" height="5" width="5" src="images/void.gif"><b>XSP Usage</b></font></td><td background="images/bar-border-right.gif" width="9"><img border="0" hspace="0" vspace="0" height="1" width="9" src="images/void.gif"></td>
</tr>
<tr>
<td align="right" valign="top" height="12" width="9"><img border="0" hspace="0" vspace="0" height="12" width="9" src="images/bar-bottom-left.gif"></td><td background="images/bar-border-bottom.gif"><img border="0" hspace="0" vspace="0" height="12" width="1" src="images/void.gif"></td><td align="left" valign="top" height="12" width="9"><img border="0" hspace="0" vspace="0" height="12" width="9" src="images/bar-bottom-right.gif"></td>
</tr>
</table>
<table cellpadding="0" cellspacing="0" width="95%" border="0">
<tr>
<td><font color="#000000" face="arial,helvetica,sanserif">
    
<p align="justify">
    To give the user some feedback why her/his submitted data was rejected
    there is a special taglib "xsp-formval". Declare its name space as
    usual.
    </p>
    
<p align="justify">
    If only interested in validation results, just:
    </p>
     
<div align="center">
<table border="0" cellpadding="0" cellspacing="4">
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td bgcolor="#ffffff">
<pre>

     &lt;xsp-formval:on-ok name="persons"&gt;
       &lt;myapp:error&gt;(ERROR)&lt;/myapp:error&gt;
     &lt;/xsp-formval:on-ok&gt;

     </pre>
</td><td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
</table>
</div>
     
<p align="justify">
       Alternatively, if you just want a boolean value from the logicsheet
       if a test is successful, use this method:
     </p>
     
<div align="center">
<table border="0" cellpadding="0" cellspacing="4">
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td bgcolor="#ffffff">
<pre>

     &lt;xsp:logic&gt;
	 if (!&lt;xsp-formval:is-ok name="persons"/&gt;) {
	      &lt;myapp:error&gt;(ERROR)&lt;/myapp:error&gt;
         };
     &lt;/xsp:logic&gt;

     </pre>
</td><td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
</table>
</div>
     
<p align="justify">
     Internationalization issues are a separate concern and are not
     discussed here.
     </p>
     
<p align="justify">
     Currently the following validation result codes are supported:
     </p>
	 
<table cellpadding="2" cellspacing="2" border="0" width="100%">
<caption></caption>
	 
<tr>
<td align="center" valign="center" rowspan="1" colspan="1" bgcolor="#039acc"><font face="arial,helvetica,sanserif" size="-1" color="#ffffff"><b>tag</b>&nbsp;
      </font></td><td align="center" valign="center" rowspan="1" colspan="1" bgcolor="#039acc"><font face="arial,helvetica,sanserif" size="-1" color="#ffffff"><b>Meaning</b>&nbsp;
      </font></td>
</tr>
	 
<tr>
<td align="left" valign="top" rowspan="1" colspan="1" bgcolor="#a0ddf0"><font face="arial,helvetica,sanserif" size="-1" color="#000000">xsp-formval:is-ok&nbsp;
      </font></td><td align="left" valign="top" rowspan="1" colspan="1" bgcolor="#a0ddf0"><font face="arial,helvetica,sanserif" size="-1" color="#000000">no error occurred,
	                                   parameter successfully 
					   checked&nbsp;
      </font></td>
</tr>
	 
<tr>
<td align="left" valign="top" rowspan="1" colspan="1" bgcolor="#a0ddf0"><font face="arial,helvetica,sanserif" size="-1" color="#000000">xsp-formval:is-error&nbsp;
      </font></td><td align="left" valign="top" rowspan="1" colspan="1" bgcolor="#a0ddf0"><font face="arial,helvetica,sanserif" size="-1" color="#000000">some error occurred, 
	                                      this is a result that 
					      is never set but serves 
					      as a comparison target
					   &nbsp;
      </font></td>
</tr>
	 
<tr>
<td align="left" valign="top" rowspan="1" colspan="1" bgcolor="#a0ddf0"><font face="arial,helvetica,sanserif" size="-1" color="#000000">xsp-formval:is-null&nbsp;
      </font></td><td align="left" valign="top" rowspan="1" colspan="1" bgcolor="#a0ddf0"><font face="arial,helvetica,sanserif" size="-1" color="#000000">the parameter is null but 
	                                     isn't allowed to&nbsp;
      </font></td>
</tr>
	 
<tr>
<td align="left" valign="top" rowspan="1" colspan="1" bgcolor="#a0ddf0"><font face="arial,helvetica,sanserif" size="-1" color="#000000">xsp-formval:is-toosmall&nbsp;
      </font></td><td align="left" valign="top" rowspan="1" colspan="1" bgcolor="#a0ddf0"><font face="arial,helvetica,sanserif" size="-1" color="#000000">either value or
	                                        length in case of a
						string is less than
						the specified
						minimum&nbsp;
      </font></td>
</tr>
	 
<tr>
<td align="left" valign="top" rowspan="1" colspan="1" bgcolor="#a0ddf0"><font face="arial,helvetica,sanserif" size="-1" color="#000000">xsp-formval:is-toolarge&nbsp;
      </font></td><td align="left" valign="top" rowspan="1" colspan="1" bgcolor="#a0ddf0"><font face="arial,helvetica,sanserif" size="-1" color="#000000">either value or
	                                         length in case of a
						 string is greater
						 than the specified
						 maximum&nbsp;
      </font></td>
</tr>			 
	 
<tr>
<td align="left" valign="top" rowspan="1" colspan="1" bgcolor="#a0ddf0"><font face="arial,helvetica,sanserif" size="-1" color="#000000">xsp-formval:is-nomatch&nbsp;
      </font></td><td align="left" valign="top" rowspan="1" colspan="1" bgcolor="#a0ddf0"><font face="arial,helvetica,sanserif" size="-1" color="#000000">a string parameter's
	                                        value is not matched
						by the specified
						regular expression&nbsp;
      </font></td>
</tr>
	 
<tr>
<td align="left" valign="top" rowspan="1" colspan="1" bgcolor="#a0ddf0"><font face="arial,helvetica,sanserif" size="-1" color="#000000">xsp-formval:is-notpresent&nbsp;
      </font></td><td align="left" valign="top" rowspan="1" colspan="1" bgcolor="#a0ddf0"><font face="arial,helvetica,sanserif" size="-1" color="#000000">this is returned
	                                           when the result of
	                                           a validation is
						   requested but no
						   such result is
						   found in the
						   request attribute &nbsp;
      </font></td>
</tr>
	 
</table>
     
<p align="justify">
     For debugging purposes or if you would like to iterate over the
     validation results, <code><font face="courier, monospaced">xsp-formval:results</font></code> returns a
     <code><font face="courier, monospaced">java.util.Map</font></code> containing them all.
     </p>
     
<p align="justify">
     If you would like to be more specific what went wrong, you can
     query the descriptor file for attributes.
     </p>
     
<p align="justify">
     First set the url of the file or resource that contains the
     parameter descriptions and constraint sets.  This needs to be an
     ancestor to all other tags (of this taglib). Multiple use of this
     tag is allowed (although probably not necessary).
     </p>       
     
<p align="justify">  
     You need to do this only if you plan to query the
     descriptor file or if you'd like to use the shorthand
     below. 
     </p>
     
<div align="center">
<table border="0" cellpadding="0" cellspacing="4">
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td bgcolor="#ffffff">
<pre>

&lt;xsp-formval:descriptor name="descriptor.xml" constraint-set="reservation"&gt;
   deposit must be at least EUR
   &lt;xsp-formval:get-attribute parameter="deposit" name="min"/&gt;
&lt;/xsp-formval:descriptor&gt;

     </pre>
</td><td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
</table>
</div>
     
<p align="justify">
     If you need to use one parameter a lot, there's a short hand. Use
     this e.g. if you'd like to set up the properties of an input tag
     according to the information from the descriptor file or if you'd
     like to give detailed error messages.
     </p>
     
<p align="justify">
     Note that you can specify additional attributes in the
     description file that are not understood (and therefore ignored)
     by the FormValidatorAction but that could be queried here. This
     might be e.g. the size of the input field which might be
     different from the max-len a parameter can take.
     </p>
     
<div align="center">
<table border="0" cellpadding="0" cellspacing="4">
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td bgcolor="#ffffff">
<pre>

&lt;xsp-formval:descriptor name="descriptor.xml" constraint-set="car-reservation"&gt;
  &lt;xsp-formval:validate name="deposit"&gt;
  &lt;xsp:logic&gt;
    if (&lt;xsp-formval:is-null/&gt;) {
      &lt;myapp:error&gt; (you must specify a deposit)) &lt;/myapp:error&gt;
    } else if ( &lt;xsp-formval:is-toosmall/&gt; ) {
      &lt;myapp:error&gt;
        (deposit is too small (&amp;lt; &lt;xsp-formval:get-attribute name="min"/&gt;))
      &lt;/myapp:error&gt;
    } else if ( &lt;xsp-formval:is-toolarge/&gt; ) {
      &lt;myapp:error&gt;
        (deposit is too large (&amp;gt; &lt;xsp-formval:get-attribute name="max"/&gt;))
      &lt;/myapp:error&gt;
    } else {
      &lt;myapp:error&gt; (ERROR) &lt;/myapp:error&gt;
    };
  &lt;/xsp:logic&gt;
  &lt;/xsp-formval:validate&gt;
&lt;/xsp-formval:descriptor&gt;

     </pre>
</td><td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
</table>
</div>
     
</font></td>
</tr>
</table>
</div>
<br>
   
</font></td>
</tr>
</table>
</div>
<br>
  

</td>
</tr>
</table>
</td>
</tr>
</table>
<table width="100%" cellspacing="0" cellpadding="0" border="0">
<tr>
<td bgcolor="#0086b2"><img width="1" src="images/dot.gif" height="1"></td>
</tr>
<tr>
<td align="center"><font size="-1" face="arial,helvetica,sanserif" color="#0086b2"><i>Copyright &copy; 1999-2002 The Apache Software Foundation. All Rights Reserved.</i></font></td>
</tr>
</table>
</body>
</html>
