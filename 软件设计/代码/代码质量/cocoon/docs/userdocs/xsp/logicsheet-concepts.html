<html xmlns:NetUtils="org.apache.cocoon.util.NetUtils">
<head>
<META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Logicsheet Concepts</title>
<script type="text/javascript" src="resources/script.js" language="JavaScript"></script>
</head>
<body bgcolor="#ffffff" marginheight="4" marginwidth="4" leftmargin="4" topmargin="4" alink="#cc0000" vlink="#0086b2" link="#039acc" text="#000000">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td align="left" valign="top" rowspan="3" height="60" width="135"><img border="0" vspace="0" hspace="0" src="images/logo.gif" height="60" width="135"></td><td background="images/line.gif" colspan="2" align="left" valign="top" height="5" width="100%"><img align="left" border="0" vspace="0" hspace="0" src="images/line.gif" height="5" width="1"></td><td align="left" valign="top" rowspan="3" height="60" width="29"><img border="0" vspace="0" hspace="0" src="images/right.gif" height="60" width="29"></td>
</tr>
<tr>
<td bgcolor="#0086b2" colspan="2" align="right" valign="top" height="35" width="100%"><img align="right" alt="Logicsheet Concepts" border="0" vspace="0" hspace="0" src="graphics/logicsheet-concepts-header.jpg_label=Logicsheet%20Concepts.jpg"></td>
</tr>
<tr>
<td background="images/bottom.gif" bgcolor="#0086b2" align="left" valign="top" height="20" width="100%"><img align="left" border="0" vspace="0" hspace="0" src="images/bottom.gif" height="20" width="3"></td><td background="images/bottom.gif" width="288" valign="top" height="20" bgcolor="#0086b2" align="right">
<table width="288" cellspacing="0" cellpadding="0" border="0">
<tr>
<td align="left" valign="top" height="20" width="96"><a onMouseOver="rolloverOn('xml');" onMouseOut="rolloverOff('xml');" target="new" href="http://xml.apache.org/"><img onLoad="rolloverLoad('xml', 'images/button-xml-hi.gif', 'images/button-xml-lo.gif');" border="0" vspace="0" hspace="0" name="xml" src="images/button-xml-lo.gif" height="20" width="96" alt="http://xml.apache.org/"></a></td><td align="left" valign="top" height="20" width="96"><a onMouseOver="rolloverOn('asf');" onMouseOut="rolloverOff('asf');" target="new" href="http://www.apache.org/"><img onLoad="rolloverLoad('asf', 'images/button-asf-hi.gif', 'images/button-asf-lo.gif');" border="0" vspace="0" hspace="0" name="asf" src="images/button-asf-lo.gif" height="20" width="96" alt="http://www.apache.org/"></a></td><td align="left" valign="top" height="20" width="96"><a onMouseOver="rolloverOn('w3c');" onMouseOut="rolloverOff('w3c');" target="new" href="http://www.w3.org/"><img onLoad="rolloverLoad('w3c', 'images/button-w3c-hi.gif', 'images/button-w3c-lo.gif');" border="0" vspace="0" hspace="0" name="w3c" src="images/button-w3c-lo.gif" height="20" width="96" alt="http://www.w3.org/"></a></td>
</tr>
</table>
</td>
</tr>
</table>
<table width="100%" cellspacing="0" cellpadding="0" border="0">
<tr width="100%">
<td valign="top" width="120">
<table width="120" cellspacing="0" cellpadding="0" border="0">
<tr>
<td valign="top" align="left"><img width="120" vspace="0" src="images/join.gif" hspace="0" height="14" border="0"><br>
</td>
</tr>
<tr>
<td valign="top" align="left"><a onMouseOver="rolloverOn('Main')" onMouseOut="rolloverOff('Main')" href="../../index.html"><img onLoad="rolloverLoad('Main', 'graphics/Main-label_over.jpg', 'graphics/Main-label.jpg');" vspace="0" hspace="0" name="Main" width="120" height="12" border="0" src="graphics/Main-label.jpg" alt="Main"></a></td>
</tr>
<tr>
<td valign="top" align="left"><a onMouseOver="rolloverOn('User Documentation')" onMouseOut="rolloverOff('User Documentation')" href="../index.html"><img onLoad="rolloverLoad('User Documentation', 'graphics/User%20Documentation-label_over.jpg', 'graphics/User%20Documentation-label.jpg');" vspace="0" hspace="0" name="User Documentation" width="120" height="12" border="0" src="graphics/User%20Documentation-label.jpg" alt="User Documentation"></a></td>
</tr>
<tr>
<td valign="top" align="left"><img alt="XSP" width="120" vspace="0" src="graphics/XSP-separator.jpg" hspace="0" height="20" border="0"><br>
</td>
</tr>
<tr>
<td valign="top" align="left"><a onMouseOver="rolloverOn('XSP')" onMouseOut="rolloverOff('XSP')" href="xsp.html"><img onLoad="rolloverLoad('XSP', 'graphics/XSP-label_over.jpg', 'graphics/XSP-label.jpg');" vspace="0" hspace="0" name="XSP" width="120" height="12" border="0" src="graphics/XSP-label.jpg" alt="XSP"></a></td>
</tr>
<tr>
<td valign="top" align="left"><a onMouseOver="rolloverOn('XSP Internals')" onMouseOut="rolloverOff('XSP Internals')" href="xsp-internals.html"><img onLoad="rolloverLoad('XSP Internals', 'graphics/XSP%20Internals-label_over.jpg', 'graphics/XSP%20Internals-label.jpg');" vspace="0" hspace="0" name="XSP Internals" width="120" height="12" border="0" src="graphics/XSP%20Internals-label.jpg" alt="XSP Internals"></a></td>
</tr>
<tr>
<td valign="top" align="left"><a onMouseOver="rolloverOn('XSP Logicsheets')" onMouseOut="rolloverOff('XSP Logicsheets')" href="logicsheet-concepts.html"><img onLoad="rolloverLoad('XSP Logicsheets', 'graphics/XSP%20Logicsheets-label_over.jpg', 'graphics/XSP%20Logicsheets-label.jpg');" vspace="0" hspace="0" name="XSP Logicsheets" width="120" height="12" border="0" src="graphics/XSP%20Logicsheets-label.jpg" alt="XSP Logicsheets"></a></td>
</tr>
<tr>
<td valign="top" align="left"><a onMouseOver="rolloverOn('XSP Guide')" onMouseOut="rolloverOff('XSP Guide')" href="logicsheet.html"><img onLoad="rolloverLoad('XSP Guide', 'graphics/XSP%20Guide-label_over.jpg', 'graphics/XSP%20Guide-label.jpg');" vspace="0" hspace="0" name="XSP Guide" width="120" height="12" border="0" src="graphics/XSP%20Guide-label.jpg" alt="XSP Guide"></a></td>
</tr>
<tr>
<td valign="top" align="left"><a onMouseOver="rolloverOn('Session Logicsheet')" onMouseOut="rolloverOff('Session Logicsheet')" href="session.html"><img onLoad="rolloverLoad('Session Logicsheet', 'graphics/Session%20Logicsheet-label_over.jpg', 'graphics/Session%20Logicsheet-label.jpg');" vspace="0" hspace="0" name="Session Logicsheet" width="120" height="12" border="0" src="graphics/Session%20Logicsheet-label.jpg" alt="Session Logicsheet"></a></td>
</tr>
<tr>
<td valign="top" align="left"><a onMouseOver="rolloverOn('Sessions')" onMouseOut="rolloverOff('Sessions')" href="sessions.html"><img onLoad="rolloverLoad('Sessions', 'graphics/Sessions-label_over.jpg', 'graphics/Sessions-label.jpg');" vspace="0" hspace="0" name="Sessions" width="120" height="12" border="0" src="graphics/Sessions-label.jpg" alt="Sessions"></a></td>
</tr>
<tr>
<td valign="top" align="left"><a onMouseOver="rolloverOn('Request Logicsheet')" onMouseOut="rolloverOff('Request Logicsheet')" href="request.html"><img onLoad="rolloverLoad('Request Logicsheet', 'graphics/Request%20Logicsheet-label_over.jpg', 'graphics/Request%20Logicsheet-label.jpg');" vspace="0" hspace="0" name="Request Logicsheet" width="120" height="12" border="0" src="graphics/Request%20Logicsheet-label.jpg" alt="Request Logicsheet"></a></td>
</tr>
<tr>
<td valign="top" align="left"><a onMouseOver="rolloverOn('ESQL Logicsheet')" onMouseOut="rolloverOff('ESQL Logicsheet')" href="esql.html"><img onLoad="rolloverLoad('ESQL Logicsheet', 'graphics/ESQL%20Logicsheet-label_over.jpg', 'graphics/ESQL%20Logicsheet-label.jpg');" vspace="0" hspace="0" name="ESQL Logicsheet" width="120" height="12" border="0" src="graphics/ESQL%20Logicsheet-label.jpg" alt="ESQL Logicsheet"></a></td>
</tr>
<tr>
<td valign="top" align="left"><a onMouseOver="rolloverOn('Forms')" onMouseOut="rolloverOff('Forms')" href="logicsheet-forms.html"><img onLoad="rolloverLoad('Forms', 'graphics/Forms-label_over.jpg', 'graphics/Forms-label.jpg');" vspace="0" hspace="0" name="Forms" width="120" height="12" border="0" src="graphics/Forms-label.jpg" alt="Forms"></a></td>
</tr>
<tr>
<td align="left" valign="top"><img width="120" vspace="0" src="images/close.gif" hspace="0" height="14" border="0"><br>
</td>
</tr>
</table>
</td><td>
<table cellspacing="0" cellpadding="0" border="0">
<tr>
<td height="10" width="100%"></td>
</tr>
<tr>
<td>
 

 
   
<div align="right">
<table cellpadding="0" cellspacing="0" width="98%" border="0">
<tr>
<td align="right" valign="bottom" height="7" width="9"><img border="0" hspace="0" vspace="0" height="7" width="9" src="images/bar-top-left.gif"></td><td background="images/bar-border-top.gif"><img border="0" hspace="0" vspace="0" height="5" width="1" src="images/void.gif"></td><td align="left" valign="bottom" height="7" width="9"><img border="0" hspace="0" vspace="0" height="7" width="9" src="images/bar-top-right.gif"></td>
</tr>
<tr>
<td background="images/bar-border-left.gif" width="9"><img border="0" hspace="0" vspace="0" height="1" width="9" src="images/void.gif"></td><td bgcolor="#0086b2" width="100%"><font color="#ffffff" face="arial,helvetica,sanserif" size="+1"><img border="0" hspace="0" vspace="0" height="5" width="5" src="images/void.gif"><b>Index</b></font></td><td background="images/bar-border-right.gif" width="9"><img border="0" hspace="0" vspace="0" height="1" width="9" src="images/void.gif"></td>
</tr>
<tr>
<td align="right" valign="top" height="12" width="9"><img border="0" hspace="0" vspace="0" height="12" width="9" src="images/bar-bottom-left.gif"></td><td background="images/bar-border-bottom.gif"><img border="0" hspace="0" vspace="0" height="12" src="images/void.gif"></td><td align="left" valign="top" height="12" width="9"><img border="0" hspace="0" vspace="0" height="12" width="9" src="images/bar-bottom-right.gif"></td>
</tr>
</table>
<table cellpadding="0" cellspacing="0" width="98%" border="0">
<tr>
<td><font color="#000000" face="arial,helvetica,sanserif">
     
<p align="justify">
       This document introduces logicsheet design and writing
       principles:
     </p>

     
<blockquote>
<ul>
       
<li>
         
<a href="#logicsheet">Logicsheets</a>
       
</li>
       
<li>
         
<a href="#helper-classes">Logicsheet Helper Classes</a>
       
</li>
       
<li>
         
<a href="#logicsheet-object">Logicsheets and Objects</a>
       
</li>
       
<li>
         
<a href="#xsl-logicsheets">Logicsheets and XSLT</a>
       
</li>
       
<li>
         
<a href="#java-logicsheets">
	   XSLT Logicsheets and XSP for Java
	 </a>
       
</li>
       
<li>
         
<a href="#logicsheet-language">
	   The SiLLy Logicsheet Language
	 </a>
       
</li>
     
</ul>
</blockquote>
  
</font></td>
</tr>
</table>
</div>
<br>

  
<a name="logicsheet">
<!--anchor--></a>
  
<div align="right">
<table cellpadding="0" cellspacing="0" width="98%" border="0">
<tr>
<td align="right" valign="bottom" height="7" width="9"><img border="0" hspace="0" vspace="0" height="7" width="9" src="images/bar-top-left.gif"></td><td background="images/bar-border-top.gif"><img border="0" hspace="0" vspace="0" height="5" width="1" src="images/void.gif"></td><td align="left" valign="bottom" height="7" width="9"><img border="0" hspace="0" vspace="0" height="7" width="9" src="images/bar-top-right.gif"></td>
</tr>
<tr>
<td background="images/bar-border-left.gif" width="9"><img border="0" hspace="0" vspace="0" height="1" width="9" src="images/void.gif"></td><td bgcolor="#0086b2" width="100%"><font color="#ffffff" face="arial,helvetica,sanserif" size="+1"><img border="0" hspace="0" vspace="0" height="5" width="5" src="images/void.gif"><b>Logicsheets</b></font></td><td background="images/bar-border-right.gif" width="9"><img border="0" hspace="0" vspace="0" height="1" width="9" src="images/void.gif"></td>
</tr>
<tr>
<td align="right" valign="top" height="12" width="9"><img border="0" hspace="0" vspace="0" height="12" width="9" src="images/bar-bottom-left.gif"></td><td background="images/bar-border-bottom.gif"><img border="0" hspace="0" vspace="0" height="12" src="images/void.gif"></td><td align="left" valign="top" height="12" width="9"><img border="0" hspace="0" vspace="0" height="12" width="9" src="images/bar-bottom-right.gif"></td>
</tr>
</table>
<table cellpadding="0" cellspacing="0" width="98%" border="0">
<tr>
<td><font color="#000000" face="arial,helvetica,sanserif">
    
<p align="justify">
      A <i>logicsheet</i> is an XML filter used to translate user-defined,
      dynamic markup into equivalent code embedding directives for a given
      markup language.
    </p>

    
<p align="justify">
      Logicsheets lie at the core of XSP's promise to separate logic from
      content and presentation: they make dynamic content generation
      capabilities available to content authors not familiar with (and
      not interested in) programming.
    </p>

    
<p align="justify">
      Logicsheets are <i>not</i> programming-language independent.
      They translate dynamic tags to <i>actual code</i> enclosed in
      code-embedding directives. Fortunately, this dependency can be
      alleviated by judiciously using
      <a href="#helper-classes">helper classes</a>.
    </p>

    
<p align="justify">
      Logicsheets are used to translate <i>dynamic tags</i> into markup
      language code-embedding directives. Thus, for example, the dynamic
      tag:
    </p>


<div align="center">
<table border="0" cellpadding="0" cellspacing="4">
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td bgcolor="#ffffff">
<pre>
&lt;util:time-of-day format="hh:mm:ss"/&gt;
</pre>
</td><td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
</table>
</div>

    
<p align="justify">
      would be transformed by the <i>util</i> logicsheet into an
      equivalent XSP expression:
    </p>


<div align="center">
<table border="0" cellpadding="0" cellspacing="4">
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td bgcolor="#ffffff">
<pre>
&lt;xsp:expr&gt;
  SimpleDateFormat.getInstance().format(new Date(), "hh:mm:ss")
&lt;/xsp:expr&gt;
</pre>
</td><td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
</table>
</div>

    
<p align="justify">
      Note that the output of logicsheet processing is <i>not</i>
      final code, but rather <i>code-embedding markup language directives</i>
      (<i>&lt;xsp:expr&gt;</i> in this case).
    </p>

    
<p align="justify">
      Logicsheets can be applied in sequence so that it's possible for one
      logicsheet to produce dynamic tags further processed by another
      logicsheet. Thus, for example:
    </p>


<div align="center">
<table border="0" cellpadding="0" cellspacing="4">
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td bgcolor="#ffffff">
<pre>
&lt;util:time-of-day&gt;
  &lt;util:parameter name="format"&gt;
    &lt;request:get-parameter name="time-format" default="hh:mm:ss"/&gt;
  &lt;/util:parameter&gt;
&lt;/util:time-of-day&gt;
</pre>
</td><td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
</table>
</div>

    
<p align="justify">
      would be transformed by the <i>util</i> logicsheet into:
    </p>


<div align="center">
<table border="0" cellpadding="0" cellspacing="4">
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td bgcolor="#ffffff">
<pre>
&lt;xsp:expr&gt;
  SimpleDateFormat.getInstance().format(
    new Date(),
    &lt;request:get-parameter name="time-format" default="hh:mm:ss"/&gt;
  )
&lt;/xsp:expr&gt;
</pre>
</td><td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
</table>
</div>

    
<p align="justify">
      which would be transformed by the <i>request</i> logicsheet,
      in turn, into:
    </p>


<div align="center">
<table border="0" cellpadding="0" cellspacing="4">
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td bgcolor="#ffffff">
<pre>
&lt;xsp:expr&gt;
  SimpleDateFormat.getInstance().format(
    new Date(),
    XSPRequestHelper.getParameter("name", "hh:mm:ss")
  )
&lt;/xsp:expr&gt;
</pre>
</td><td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
</table>
</div>

    
<p align="justify">
      Note in the examples above that dynamic tags can be
      "overloaded" in the sense that they can take as parameters
      either <i>constant attribute values</i> or
      <i>nested parameter elements</i>:
    </p>


<div align="center">
<table border="0" cellpadding="0" cellspacing="4">
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td bgcolor="#ffffff">
<pre>
&lt;!-- Parameter "format" known at page authoring time --&gt;
&lt;util:time-of-day format="hh:mm:ss"/&gt;

&lt;!-- Parameter "format" known at request time --&gt;
&lt;util:time-of-day&gt;
  &lt;util:parameter name="format"&gt;
    &lt;request:get-parameter name="time-format" default="hh:mm:ss"/&gt;
  &lt;/util:parameter&gt;
&lt;/util:time-of-day&gt;
</pre>
</td><td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
</table>
</div>

    
<p align="justify">
      This means that logicsheets must be able to cope with constant
      strings, complex expressions and nested parameter processing.
      Also, logicsheets must be capable of reporting parameter value
      errors and, possibly, halt code generation altogether.
    </p>

    
<p align="justify">
      In order to minimize this complexity (and its associated debugging
      nightmares!), properly designed logicsheets typically make use of
      <b>helper classes</b>.
    </p>
  
</font></td>
</tr>
</table>
</div>
<br>

  
<a name="helper-classes">
<!--anchor--></a>
  
<div align="right">
<table cellpadding="0" cellspacing="0" width="98%" border="0">
<tr>
<td align="right" valign="bottom" height="7" width="9"><img border="0" hspace="0" vspace="0" height="7" width="9" src="images/bar-top-left.gif"></td><td background="images/bar-border-top.gif"><img border="0" hspace="0" vspace="0" height="5" width="1" src="images/void.gif"></td><td align="left" valign="bottom" height="7" width="9"><img border="0" hspace="0" vspace="0" height="7" width="9" src="images/bar-top-right.gif"></td>
</tr>
<tr>
<td background="images/bar-border-left.gif" width="9"><img border="0" hspace="0" vspace="0" height="1" width="9" src="images/void.gif"></td><td bgcolor="#0086b2" width="100%"><font color="#ffffff" face="arial,helvetica,sanserif" size="+1"><img border="0" hspace="0" vspace="0" height="5" width="5" src="images/void.gif"><b>Logicsheet Helper Classes</b></font></td><td background="images/bar-border-right.gif" width="9"><img border="0" hspace="0" vspace="0" height="1" width="9" src="images/void.gif"></td>
</tr>
<tr>
<td align="right" valign="top" height="12" width="9"><img border="0" hspace="0" vspace="0" height="12" width="9" src="images/bar-bottom-left.gif"></td><td background="images/bar-border-bottom.gif"><img border="0" hspace="0" vspace="0" height="12" src="images/void.gif"></td><td align="left" valign="top" height="12" width="9"><img border="0" hspace="0" vspace="0" height="12" width="9" src="images/bar-bottom-right.gif"></td>
</tr>
</table>
<table cellpadding="0" cellspacing="0" width="98%" border="0">
<tr>
<td><font color="#000000" face="arial,helvetica,sanserif">
    
<p align="justify">
      A <i>helper class</i> is a Java class containing a collection
      of <i>static</i> methods whose arguments correspond (one-to-one)
      with their dynamic tag counterparts.
    </p>

    
<p align="justify">
      Consider the following dynamic tag use-case:
    </p>


<div align="center">
<table border="0" cellpadding="0" cellspacing="4">
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td bgcolor="#ffffff">
<pre>
&lt;sql:create-connection name="demo"&gt;
&lt;sql:jdbc-driver&gt;
  oracle.jdbc.driver.OracleDriver
&lt;/sql:jdbc-driver&gt;
&lt;sql:connect-url&gt;
  jdbc:oracle:thin:@localhost:1521:ORCL
&lt;/sql:connect-url&gt;
&lt;sql:user-name&gt;
  &lt;request:get-parameter name="user"/&gt;
&lt;/sql:user-name&gt;
&lt;sql:password&gt;
  &lt;request:get-parameter name="password"/&gt;
&lt;/sql:password&gt;
&lt;/sql:create-connection&gt;
</pre>
</td><td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
</table>
</div>

    
<p align="justify">
      A brute-force logicsheet template may be implemented
      (in XSLT, as discussed <a href="#xsl-logicsheets">below</a>)
      as:
    </p>


<div align="center">
<table border="0" cellpadding="0" cellspacing="4">
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td bgcolor="#ffffff">
<pre>
&lt;xsl:template match="sql:create-connection"&gt;
&lt;!-- *** Argument collection skipped for the sake of brevity *** --&gt;
&lt;xsp:logic&gt; {
  Class.forName(&lt;xsl:copy-of select="$jdbc-driver"/&gt;).newInstance();

  Connection myConnection =
    DriverManager.getConnection(
      &lt;xsl:copy-of select="$connect-url"/&gt;,
      &lt;xsl:copy-of select="$user-name"/&gt;,
      &lt;xsl:copy-of select="$password"/&gt;
    );

  Session mySession = request.getSession(true);

  Connection previousConnection = (Connection)
    mySession.getAttribute(
      "connection." + &lt;xsl:copy-of select="$name"/&gt;
    );

  if (previousConnection != null) {
    previousConnection.commit();
    previousConnection.close();
  }

  mySession.setAttribute(
    "connection." + &lt;xsl:copy-of select="$name"/&gt;,
    myConnection
  )
} &lt;/xsp:logic&gt;
&lt;/xsl:template&gt;
</pre>
</td><td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
</table>
</div>

    
<p align="justify">
      This approach has a number of drawbacks.
    </p>

    
<blockquote>
<ul>
      
<li>
        Even when using enclosing braces around the <i>&lt;xsp:logic&gt;</i>
        section, there's always the risk that the page author (or another
        logicsheet!) has previously defined variables called
        <code><font face="courier, monospaced">myConnection</font></code>, <code><font face="courier, monospaced">previousConnection</font></code> or
        <code><font face="courier, monospaced">mySession</font></code>. This will result in multiply-defined variable
        compilation errors
      </li>
      
<li>
        Parameter values (like <code><font face="courier, monospaced">$name</font></code>) cannot be safely used
        more than once. As much as they can come from harmless string
        constants, they can also come from complex expressions involving
        method/function calls which can have unpredictable side-effects
        should they be called more than once in the current context
      </li>
      
<li>
        If another logicsheet (or the page author) has imported a class
        called <code><font face="courier, monospaced">Connection</font></code> the generated code will produce an
        ambiguous class definition compiler error
      </li>
    
</ul>
</blockquote>

    
<p align="justify">
      It's here that helper classes come to the rescue. By moving all
      the above logic to a static method <code><font face="courier, monospaced">createConnection</font></code>
      in helper class <code><font face="courier, monospaced">SQLHelper</font></code>, we can now rewrite
      (and simplify!) our logicsheet to read:
    </p>


<div align="center">
<table border="0" cellpadding="0" cellspacing="4">
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td bgcolor="#ffffff">
<pre>
&lt;xsl:template match="sql:create-connection"&gt;
&lt;!-- *** Argument collection skipped for the sake of brevity *** --&gt;
&lt;xsp:logic&gt;
  SQLHelper.createConnection(
    &lt;xsl:copy-of select="$name"/&gt;,
    &lt;xsl:copy-of select="$connect-url"/&gt;,
    &lt;xsl:copy-of select="$user-name"/&gt;,
    &lt;xsl:copy-of select="$password"/&gt;,
    request
  );
&lt;/xsp:logic&gt;
&lt;/xsl:template&gt;
</pre>
</td><td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
</table>
</div>

    
<p align="justify">
      This simple approach brings several benefits:
    </p>

    
<blockquote>
<ul>
      
<li>
        Safer parameter evaluation, with no unpredictable side
        effects
      </li>
      
<li>
        Programming language-independence: expressions calling
        "native" Java code tend to have the same syntax in all
        programming languages, thus reducing the need to maintain
        multiple versions of the same logicsheet
      </li>
      
<li>
        Simpler debugging: syntax errors can now be traced to bad
        parameter values, rather than invalid code
      </li>
      
<li>
        Easier logic maintenance: it takes places at the helper
        class level, rather than at the logicsheet's
      </li>
      
<li>
        Reduced generated code size.
      </li>
    
</ul>
</blockquote>
  
</font></td>
</tr>
</table>
</div>
<br>

  
<a name="logicsheet-object">
<!--anchor--></a>
  
<div align="right">
<table cellpadding="0" cellspacing="0" width="98%" border="0">
<tr>
<td align="right" valign="bottom" height="7" width="9"><img border="0" hspace="0" vspace="0" height="7" width="9" src="images/bar-top-left.gif"></td><td background="images/bar-border-top.gif"><img border="0" hspace="0" vspace="0" height="5" width="1" src="images/void.gif"></td><td align="left" valign="bottom" height="7" width="9"><img border="0" hspace="0" vspace="0" height="7" width="9" src="images/bar-top-right.gif"></td>
</tr>
<tr>
<td background="images/bar-border-left.gif" width="9"><img border="0" hspace="0" vspace="0" height="1" width="9" src="images/void.gif"></td><td bgcolor="#0086b2" width="100%"><font color="#ffffff" face="arial,helvetica,sanserif" size="+1"><img border="0" hspace="0" vspace="0" height="5" width="5" src="images/void.gif"><b>Logicsheets and Objects</b></font></td><td background="images/bar-border-right.gif" width="9"><img border="0" hspace="0" vspace="0" height="1" width="9" src="images/void.gif"></td>
</tr>
<tr>
<td align="right" valign="top" height="12" width="9"><img border="0" hspace="0" vspace="0" height="12" width="9" src="images/bar-bottom-left.gif"></td><td background="images/bar-border-bottom.gif"><img border="0" hspace="0" vspace="0" height="12" src="images/void.gif"></td><td align="left" valign="top" height="12" width="9"><img border="0" hspace="0" vspace="0" height="12" width="9" src="images/bar-bottom-right.gif"></td>
</tr>
</table>
<table cellpadding="0" cellspacing="0" width="98%" border="0">
<tr>
<td><font color="#000000" face="arial,helvetica,sanserif">
    
<p align="justify">
      Though not required to do so, each logicsheet typically deals with
      a single <i>object type</i>.
    </p>

    
<p align="justify">
      What objects must be manipulated by means of logicsheets depends
      mostly on the calling <i>host environment</i>.
    </p>

    
<p align="justify">
      Thus, for example, when Cocoon is used as a servlet, XSP pages
      need access to the underlying servlet engine objects: request,
      response, session, servlet config, etc.
    </p>

    
<p align="justify">
      In general, in order to enable dynamic content generation for each
      host environment, logicsheets must be written that provide
      markup-based access to its objects and methods:
    </p>


<div align="center">
<table border="0" cellpadding="0" cellspacing="4">
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td bgcolor="#ffffff">
<pre>
&lt;request:get-parameter name="part-number"/&gt;

&lt;response:send-redirect location="error-page.xml"/&gt;

&lt;cookie:create name="user-preferences"/&gt;
</pre>
</td><td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
</table>
</div>

    
<p align="justify">
      In general, for each object type required by a server pages
      application a helper class should be written that:
    </p>

    
<blockquote>
<ul>
      
<li>
        Provides access to the object's methods and services
      </li>
      
<li>
        Provides convenience methods to wrap values returned
        by object methods as XML
      </li>
    
</ul>
</blockquote>

    
<p align="justify">
      Within this discipline, <i>each object type must define a separate,
      identifying namespace</i>.
    </p>

    
<p align="justify">
      Finally, logicsheets may require a <i>preprocessor</i> that augments
      its input document with extra information prior to markup
      transformation.
    </p>

    
<p align="justify">
      As an example of logicsheet preprocessing, consider an
      <code><font face="courier, monospaced">xbean</font></code> logicsheet providing services similar to the
      JSP's intrinsic <code><font face="courier, monospaced">&lt;jsp:useBean&gt;</font></code> tag:
    </p>


<div align="center">
<table border="0" cellpadding="0" cellspacing="4">
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td bgcolor="#ffffff">
<pre>
. . .
&lt;xbean:use-bean id="myCart" class="com.acme.cart.CartBean" scope="session"&gt;
&lt;xbean:set-property property-name="type" property-value="promotion"/&gt;
&lt;xbean:set-property property-name="customer" parameter-value="custid"/&gt;
&lt;/xbean:use-bean&gt;
. . .
&lt;p&gt;
Hello &lt;xbean:get-property bean-id="myCart" property-name="customerName"/&gt;,
welcome back!
You have the following discounts:
&lt;/p&gt;

&lt;xbean:get-property bean-id="myCart" property-name="discount"/&gt;
. . .
</pre>
</td><td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
</table>
</div>

    
<p align="justify">
      In this case, code to be emitted by the logicsheet will vary
      wildly depending on whether a given bean property is indexed,
      multivalued or object-typed; different conversions and traversing
      code may be needed for each property based on its Java and
      bean types.
    </p>

    
<p align="justify">
      A logicsheet preprocessor could introspect the given bean at code
      generation time to augment the input document with additional
      information as to make it possible for an XSLT-based logicsheet
      to emit appropriate code:
    </p>


<div align="center">
<table border="0" cellpadding="0" cellspacing="4">
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td bgcolor="#ffffff">
<pre>
. . .
&lt;xbean:use-bean id="myCart" class="com.acme.cart.CartBean" scope="session"&gt;
&lt;xbean:set-property
  property-name="type" property-value="promotion"
  java-type="String"
  is-indexed="false"
/&gt;
&lt;xbean:set-property property-name="customer" parameter-value="custid"
  java-type="String"
  is-indexed="false"
/&gt;
&lt;/xbean:use-bean&gt;
. . .
&lt;p&gt;
Hello
  &lt;xbean:get-property bean-id="myCart" property-name="customerName"
    java-type="String"
    is-indexed="false"
   /&gt;,
welcome back!
You have the following discounts
&lt;/p&gt;

&lt;xbean:get-property bean-id="myCart" property-name="discount"
java-type="float"
is-indexed="true"
/&gt;
. . .
</pre>
</td><td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
</table>
</div>

    
<p align="justify">
      Using this information, the logicsheet can decide, for a given
      bean property, whether to generate a simple
      <code><font face="courier, monospaced">String.valueOf()</font></code> or an indexed loop displaying
      individual property values.
    </p>

    
<p>
<table border="0" cellpadding="0" cellspacing="3" width="100%">
<tr>
<td valign="top" width="28"><img alt="Note" border="0" hspace="0" vspace="0" height="29" width="28" src="images/note.gif"></td><td valign="top"><font color="#000000" face="arial,helvetica,sanserif" size="-1"><i>
      Logicsheet preprocessor is still unimplemented.
      Preprocessing may be performed as well in XSLT by using
      <i>extension functions</i>.  Logicsheet preprocessing is meant to be
      used in those cases where the XSLT processor being used by Cocoon
      does not support XSLT extensions. (As of this writing, only
      <a href="http://xml.apache.org/xalan/">Xalan</a>
      is known to support XSLT extensions).
    </i></font></td>
</tr>
</table>
</p>
  
</font></td>
</tr>
</table>
</div>
<br>

  
<a name="xsl-logicsheets">
<!--anchor--></a>
  
<div align="right">
<table cellpadding="0" cellspacing="0" width="98%" border="0">
<tr>
<td align="right" valign="bottom" height="7" width="9"><img border="0" hspace="0" vspace="0" height="7" width="9" src="images/bar-top-left.gif"></td><td background="images/bar-border-top.gif"><img border="0" hspace="0" vspace="0" height="5" width="1" src="images/void.gif"></td><td align="left" valign="bottom" height="7" width="9"><img border="0" hspace="0" vspace="0" height="7" width="9" src="images/bar-top-right.gif"></td>
</tr>
<tr>
<td background="images/bar-border-left.gif" width="9"><img border="0" hspace="0" vspace="0" height="1" width="9" src="images/void.gif"></td><td bgcolor="#0086b2" width="100%"><font color="#ffffff" face="arial,helvetica,sanserif" size="+1"><img border="0" hspace="0" vspace="0" height="5" width="5" src="images/void.gif"><b>Logicsheets and XSLT</b></font></td><td background="images/bar-border-right.gif" width="9"><img border="0" hspace="0" vspace="0" height="1" width="9" src="images/void.gif"></td>
</tr>
<tr>
<td align="right" valign="top" height="12" width="9"><img border="0" hspace="0" vspace="0" height="12" width="9" src="images/bar-bottom-left.gif"></td><td background="images/bar-border-bottom.gif"><img border="0" hspace="0" vspace="0" height="12" src="images/void.gif"></td><td align="left" valign="top" height="12" width="9"><img border="0" hspace="0" vspace="0" height="12" width="9" src="images/bar-bottom-right.gif"></td>
</tr>
</table>
<table cellpadding="0" cellspacing="0" width="98%" border="0">
<tr>
<td><font color="#000000" face="arial,helvetica,sanserif">
    
<p align="justify">
      XSLT-based transformation is clearly the obvious choice for
      implementing logicsheets.
    </p>

    
<p align="justify">
      XSLT provides all the capabilities needed for dynamic markup
      transformation as well for final code generation (described
      in
      <a href="xsp-internals.html#logicsheet-generator">
        Logicsheet Code Generators
      </a>).
    </p>

    
<p align="justify">
      In fact, logicsheet transformations require only a subset of
      XSLT much more general capabilities:
    </p>

    
<blockquote>
<ul>
      
<li>
        Transforming an input element into other element(s) and
        nested text (code)
      </li>
      
<li>
        Collecting and validating parameters as variables
      </li>
      
<li>
        Substituting variables as either text or nested elements
      </li>
    
</ul>
</blockquote>

    
<p align="justify">
      Paradoxically, though, the XSLT and XPath expressions required
      to perform these apparently simple tasks can easily become too
      verbose, and hard-to-read.
    </p>

    
<p align="justify">
      This real disadvantage doesn't stem from XSLT not being appropriate
      or powerful enough to perform the required transformations, but
      rather from its directives being too low-level for this particular task.
    </p>

    
<p align="justify">
      In a classical XML spirit, the solution to this problem is found in
      the definition of a higher-level language specifically targeted to
      code-generation transformations. Documents written in this language
      are transformed into "regular" XSLT stylesheets and subsequently
      applied to input documents for code generation.
    </p>

    
<p align="justify">
      Such language is described in detail below, under
      <a href="#logicsheet-language">
        The SiLLy Logicsheet Language
      </a>.
    </p>

    
<p align="justify">
      In general, XSLT logicsheets <b>must</b> preserve all markup
      not recognized by its own templates:
    </p>


<div align="center">
<table border="0" cellpadding="0" cellspacing="4">
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td bgcolor="#ffffff">
<pre>
&lt;xsl:template match="@*|node()" priority="-1"&gt;
&lt;xsl:copy&gt;&lt;xsl:apply-templates select="@*|node()"/&gt;&lt;/xsl:copy&gt;
&lt;/xsl:template&gt;
</pre>
</td><td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
</table>
</div>

    
<p align="justify">
      Parameters should be passed to dynamic tags by means of <i>both</i>
      attributes and nested elements. Also, dynamic tag parameters must be
      accepted <i>both</i> as constant strings and as (potentially complex)
      expressions. These two requirements are illustrated in the above
      <i>util</i> logicsheet example:
    </p>


<div align="center">
<table border="0" cellpadding="0" cellspacing="4">
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td bgcolor="#ffffff">
<pre>
&lt;!-- Parameter "format" known at page authoring time --&gt;
&lt;util:time-of-day format="hh:mm:ss"/&gt;

&lt;!-- Parameter "format" known at request time --&gt;
&lt;util:time-of-day&gt;
&lt;util:parameter name="format"&gt;
  &lt;xsp:expr&gt;
    request.getParameter("format");
  &lt;/xsp:expr&gt;
&lt;/util:parameter&gt;
&lt;/util:time-of-day&gt;
</pre>
</td><td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
</table>
</div>

    
<p align="justify">
      In order to support this, a number of utility templates have been
      defined:
    </p>


<div align="center">
<table border="0" cellpadding="0" cellspacing="4">
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td bgcolor="#ffffff">
<pre>
&lt;!-- Utility templates --&gt;
&lt;xsl:template name="get-parameter"&gt;
&lt;xsl:param name="name"/&gt;
&lt;xsl:param name="default"/&gt;
&lt;xsl:param name="required"&gt;false&lt;/xsl:param&gt;

&lt;xsl:variable name="qname"&gt;
  &lt;xsl:value-of select="concat($prefix, ':param')"/&gt;
&lt;/xsl:variable&gt;

&lt;xsl:choose&gt;
  &lt;xsl:when test="@*[name(.) = $name]"&gt;
    "&lt;xsl:value-of select="@*[name(.) = $name]"/&gt;"
  &lt;/xsl:when&gt;
  &lt;xsl:when test="(*[name(.) = $qname])[@name = $name]"&gt;
    &lt;xsl:call-template name="get-nested-content"&gt;
      &lt;xsl:with-param name="content"
        select="(*[name(.) = $qname])[@name = $name]"/&gt;
    &lt;/xsl:call-template&gt;
  &lt;/xsl:when&gt;
  &lt;xsl:otherwise&gt;
    &lt;xsl:choose&gt;
      &lt;xsl:when test="string-length($default) = 0"&gt;
        &lt;xsl:choose&gt;
          &lt;xsl:when test="$required = 'true'"&gt;
            &lt;xsl:call-template name="error"&gt;
              &lt;xsl:with-param name="message"&gt;
              [Logicsheet processor]
                Parameter '&lt;xsl:value-of select="$name"/&gt;'
              missing in dynamic tag
              &amp;lt;&lt;xsl:value-of select="name(.)"/&gt;&amp;gt;
              &lt;/xsl:with-param&gt;
            &lt;/xsl:call-template&gt;
          &lt;/xsl:when&gt;
          &lt;xsl:otherwise&gt;""&lt;/xsl:otherwise&gt;
        &lt;/xsl:choose&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:otherwise&gt;&lt;xsl:copy-of select="$default"/&gt;&lt;/xsl:otherwise&gt;
    &lt;/xsl:choose&gt;
  &lt;/xsl:otherwise&gt;
&lt;/xsl:choose&gt;
&lt;/xsl:template&gt;

&lt;xsl:template name="get-nested-content"&gt;
&lt;xsl:param name="content"/&gt;
&lt;xsl:choose&gt;
  &lt;xsl:when test="$content/*"&gt;
    &lt;xsl:apply-templates select="$content/*"/&gt;
  &lt;/xsl:when&gt;
  &lt;xsl:otherwise&gt;"&lt;xsl:value-of select="$content"/&gt;"&lt;/xsl:otherwise&gt;
&lt;/xsl:choose&gt;
&lt;/xsl:template&gt;

&lt;xsl:template name="get-nested-string"&gt;
&lt;xsl:param name="content"/&gt;
&lt;xsl:choose&gt;
  &lt;xsl:when test="$content/*"&gt;
    ""
    &lt;xsl:for-each select="$content/node()"&gt;
      &lt;xsl:choose&gt;
        &lt;xsl:when test="name(.)"&gt;
          + &lt;xsl:apply-templates select="."/&gt;
        &lt;/xsl:when&gt;
        &lt;xsl:otherwise&gt;
          + "&lt;xsl:value-of select="translate(.,'&amp;#9;&amp;#10;&amp;#13;','   ')"/&gt;"
        &lt;/xsl:otherwise&gt;
      &lt;/xsl:choose&gt;
    &lt;/xsl:for-each&gt;
  &lt;/xsl:when&gt;
  &lt;xsl:otherwise&gt;"&lt;xsl:value-of select="$content"/&gt;"&lt;/xsl:otherwise&gt;
&lt;/xsl:choose&gt;
&lt;/xsl:template&gt;

&lt;xsl:template name="error"&gt;
&lt;xsl:param name="message"/&gt;
&lt;xsl:message terminate="yes"&gt;&lt;xsl:value-of select="$message"/&gt;&lt;/xsl:message&gt;
&lt;/xsl:template&gt;
</pre>
</td><td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
</table>
</div>

    
<p align="justify">
      Given these utility templates, the example
      <code><font face="courier, monospaced">&lt;util:time-of-day&gt;</font></code> template would look like:
    </p>


<a name="complex-example">
<!--anchor--></a>

<div align="center">
<table border="0" cellpadding="0" cellspacing="4">
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td bgcolor="#ffffff">
<pre>
&lt;xsl:template match="sql:create-connection"&gt;
&lt;xsl:variable name="name"&gt;
  &lt;xsl:call-template name="get-parameter"&gt;
    &lt;xsl:with-param name="name"&gt;name&lt;/xsl:with-param&gt;
    &lt;xsl:with-param name="required"&gt;true&lt;/xsl:with-param&gt;
  &lt;/xsl:call-template&gt;
&lt;/xsl:variable&gt;

&lt;xsl:variable name="jdbc-driver"&gt;
  &lt;xsl:call-template name="get-parameter"&gt;
    &lt;xsl:with-param name="name"&gt;jdbc-driver&lt;/xsl:with-param&gt;
    &lt;xsl:with-param name="required"&gt;true&lt;/xsl:with-param&gt;
  &lt;/xsl:call-template&gt;
&lt;/xsl:variable&gt;

&lt;xsl:variable name="connect-url"&gt;
  &lt;xsl:call-template name="get-parameter"&gt;
    &lt;xsl:with-param name="name"&gt;connect-url&lt;/xsl:with-param&gt;
    &lt;xsl:with-param name="required"&gt;true&lt;/xsl:with-param&gt;
  &lt;/xsl:call-template&gt;
&lt;/xsl:variable&gt;

&lt;xsl:variable name="user-name"&gt;
  &lt;xsl:call-template name="get-parameter"&gt;
    &lt;xsl:with-param name="name"&gt;user-name&lt;/xsl:with-param&gt;
    &lt;xsl:with-param name="required"&gt;true&lt;/xsl:with-param&gt;
  &lt;/xsl:call-template&gt;
&lt;/xsl:variable&gt;

&lt;xsl:variable name="password"&gt;
  &lt;xsl:call-template name="get-parameter"&gt;
    &lt;xsl:with-param name="name"&gt;password&lt;/xsl:with-param&gt;
    &lt;xsl:with-param name="required"&gt;true&lt;/xsl:with-param&gt;
  &lt;/xsl:call-template&gt;
&lt;/xsl:variable&gt;

&lt;xsp:logic&gt;
  SQLHelper.createConnection(
    &lt;xsl:copy-of select="$name"/&gt;,
    &lt;xsl:copy-of select="$connect-url"/&gt;,
    &lt;xsl:copy-of select="$user-name"/&gt;,
    &lt;xsl:copy-of select="$password"/&gt;,
    request
  );
&lt;/xsp:logic&gt;
&lt;/xsl:template&gt;
</pre>
</td><td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
</table>
</div>

    
<p align="justify">
      This example shows clearly why we need a
     <a href="#logicsheet-language">SiLLy</a>
     language!
    </p>
  
</font></td>
</tr>
</table>
</div>
<br>

  
<a name="java-logicsheets">
<!--anchor--></a>
  
<div align="right">
<table cellpadding="0" cellspacing="0" width="98%" border="0">
<tr>
<td align="right" valign="bottom" height="7" width="9"><img border="0" hspace="0" vspace="0" height="7" width="9" src="images/bar-top-left.gif"></td><td background="images/bar-border-top.gif"><img border="0" hspace="0" vspace="0" height="5" width="1" src="images/void.gif"></td><td align="left" valign="bottom" height="7" width="9"><img border="0" hspace="0" vspace="0" height="7" width="9" src="images/bar-top-right.gif"></td>
</tr>
<tr>
<td background="images/bar-border-left.gif" width="9"><img border="0" hspace="0" vspace="0" height="1" width="9" src="images/void.gif"></td><td bgcolor="#0086b2" width="100%"><font color="#ffffff" face="arial,helvetica,sanserif" size="+1"><img border="0" hspace="0" vspace="0" height="5" width="5" src="images/void.gif"><b>XSLT Logicsheets and XSP for Java</b></font></td><td background="images/bar-border-right.gif" width="9"><img border="0" hspace="0" vspace="0" height="1" width="9" src="images/void.gif"></td>
</tr>
<tr>
<td align="right" valign="top" height="12" width="9"><img border="0" hspace="0" vspace="0" height="12" width="9" src="images/bar-bottom-left.gif"></td><td background="images/bar-border-bottom.gif"><img border="0" hspace="0" vspace="0" height="12" src="images/void.gif"></td><td align="left" valign="top" height="12" width="9"><img border="0" hspace="0" vspace="0" height="12" width="9" src="images/bar-bottom-right.gif"></td>
</tr>
</table>
<table cellpadding="0" cellspacing="0" width="98%" border="0">
<tr>
<td><font color="#000000" face="arial,helvetica,sanserif">
    
<p align="justify">
      The Java programming language defines a source program structure that
     must be take into account for properly generating code:
    </p>

    
<blockquote>
<ul>
      
<li>Package declaration</li>
     
<li>Imports</li>
     
<li>Class declaration</li>
     
<li>Class-level declarations (methods and variables)</li>
     
<li>Application-specific method body</li>
    
</ul>
</blockquote>

    
<p align="justify">
      The <code><font face="courier, monospaced">&lt;xsp:page&gt;</font></code> tag must contain one (and only
     one) "user" root element.
    </p>

    
<p align="justify">
      All markup enclosed within the user root element will be placed
     inside method <code><font face="courier, monospaced">generate()</font></code> of the generated
     <code><font face="courier, monospaced">XSPGenerator</font></code> subclass.
    </p>

    
<p align="justify">
      The <code><font face="courier, monospaced">&lt;xsp:structure&gt;</font></code>
      and <code><font face="courier, monospaced">&lt;xsp:include&gt;</font></code> tags are used to
     import "external" classes and <b>must</b> be
     top-level elements (i.e., they must placed directly under
     the <code><font face="courier, monospaced">&lt;xsp:page&gt;</font></code> root element):
    </p>


<div align="center">
<table border="0" cellpadding="0" cellspacing="4">
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td bgcolor="#ffffff">
<pre>
&lt;xsp:structure&gt;
&lt;xsp:include&gt;java.sql.*&lt;/xsp:include&gt;
&lt;xsp:include&gt;java.text.SimpleDateFormat&lt;/xsp:include&gt;
&lt;/xsp:structure&gt;
</pre>
</td><td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
</table>
</div>

    
<p align="justify">
      The <code><font face="courier, monospaced">&lt;xsp:logic&gt;</font></code> tag can be used to
     generate <i>class-level</i> variable and method declarations
     when used as a top-level element:
    </p>


<div align="center">
<table border="0" cellpadding="0" cellspacing="4">
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td bgcolor="#ffffff">
<pre>
&lt;xsp:page&gt;
&lt;xsp:structure&gt;
  &lt;xsp:include&gt;java.text.SimpleDateFormat&lt;/xsp:include&gt;
&lt;/xsp:structure&gt;

&lt;!-- Class-level declarations --&gt;
&lt;xsp:logic&gt;
  private static String timeOfDay(String format) {
    if (format == null || format.length() == 0) {
      format = "hh:mm:ss";
    }

    return SimpleDateFormat.getInstance().format(new Date(), format);
  }
&lt;/xsp:logic&gt;
. . .
&lt;user-root&gt;
 . . .
 &lt;p&gt;
   It's now
   &lt;xsp:expr&gt;
     timeOfDay(request.getParameter("timeFormat"));
   &lt;/xsp:expr&gt;
 &lt;/p&gt;
 . . .
&lt;/user-root&gt;
&lt;xsp:page&gt;
</pre>
</td><td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
</table>
</div>

    
<p align="justify">
      Thus, when a logicsheet adds to the import or class-level declaration
     "sections", it <b>must</b> preserve all the declarations
     possibly generated by previous logicsheets:
    </p>


<div align="center">
<table border="0" cellpadding="0" cellspacing="4">
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td bgcolor="#ffffff">
<pre>
&lt;xsl:template match="xsp:page"&gt;
&lt;xsp:page&gt;
  &lt;xsl:apply-templates select="@*"/&gt;

  &lt;xsp:structure&gt;
    &lt;xsp:include&gt;java.text.*&lt;/xsp:include&gt;
  &lt;/xsp:structure&gt;

  &lt;xsp:logic&gt;
    private static int count = 0;
    private static synchronized int getCounter() {
      return ++count;
    }
    . . .
  &lt;/xsp:logic&gt;

  &lt;xsl:apply-templates/&gt;
&lt;/xsp:page&gt;
&lt;/xsl:template&gt;
</pre>
</td><td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
</table>
</div>
  
</font></td>
</tr>
</table>
</div>
<br>

 
<a name="logicsheet-language">
<!--anchor--></a>
 
<div align="right">
<table cellpadding="0" cellspacing="0" width="98%" border="0">
<tr>
<td align="right" valign="bottom" height="7" width="9"><img border="0" hspace="0" vspace="0" height="7" width="9" src="images/bar-top-left.gif"></td><td background="images/bar-border-top.gif"><img border="0" hspace="0" vspace="0" height="5" width="1" src="images/void.gif"></td><td align="left" valign="bottom" height="7" width="9"><img border="0" hspace="0" vspace="0" height="7" width="9" src="images/bar-top-right.gif"></td>
</tr>
<tr>
<td background="images/bar-border-left.gif" width="9"><img border="0" hspace="0" vspace="0" height="1" width="9" src="images/void.gif"></td><td bgcolor="#0086b2" width="100%"><font color="#ffffff" face="arial,helvetica,sanserif" size="+1"><img border="0" hspace="0" vspace="0" height="5" width="5" src="images/void.gif"><b>The SiLLy Logicsheet Language</b></font></td><td background="images/bar-border-right.gif" width="9"><img border="0" hspace="0" vspace="0" height="1" width="9" src="images/void.gif"></td>
</tr>
<tr>
<td align="right" valign="top" height="12" width="9"><img border="0" hspace="0" vspace="0" height="12" width="9" src="images/bar-bottom-left.gif"></td><td background="images/bar-border-bottom.gif"><img border="0" hspace="0" vspace="0" height="12" src="images/void.gif"></td><td align="left" valign="top" height="12" width="9"><img border="0" hspace="0" vspace="0" height="12" width="9" src="images/bar-bottom-right.gif"></td>
</tr>
</table>
<table cellpadding="0" cellspacing="0" width="98%" border="0">
<tr>
<td><font color="#000000" face="arial,helvetica,sanserif">
   
<p align="justify">
     In order to overcome the extreme complexity of logicsheet transformations
     expressed in XSLT, a simpler, higher-level XML transformation language
     is being defined: <i>Simple Logicsheet Language</i>
     (or <i>SiLLy</i>, so baptized by Stefano Mazzocchi in a humorous
     rejection of its first proposed name).
   </p>

   
<p align="justify">
     SiLLy templates are much terser and easier to read and write than
     the XSLT-based examples presented
     <a href="#complex-example">above</a>:
   </p>


<div align="center">
<table border="0" cellpadding="0" cellspacing="4">
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td bgcolor="#ffffff">
<pre>
&lt;sll:logicsheet
  xmlns:sll="http://xml.apache.org/sll"
  xmlns:xsl="http://www.w3c.org/1999/XSL/Transform"
&gt;
  &lt;sll:namespace prefix="sql" uri="http://xml.apache.org/sql"/&gt;
  
  &lt;sll:prolog&gt;
    &lt;xsp:structure&gt;
      &lt;xsp:include&gt;import SQLHelper;&lt;/xsp:include&gt;
    &lt;/xsp:structure&gt;
  &lt;sll:prolog&gt;
  
  &lt;sll:element name="create-connection"&gt;
    &lt;sll:parameter name="name" required="true"/&gt;
    &lt;sll:parameter name="jdbc-driver"
      default="oracle.jdbc.driver.OracleDriver"/&gt;
    &lt;sll:parameter name="connect-url"
      default="jdbc:oracle:thin:@localhost:1521:ORCL"/&gt;
    &lt;sll:parameter name="user-name" required="true"/&gt;
    &lt;sll:parameter name="password" required="true"/&gt;
  
    &lt;sll:body&gt;
      &lt;xsp:logic&gt;
        SQLHelper.createConnection(
          &lt;sll:parameter-value select="name"/&gt;,
          &lt;sll:parameter-value select="jdbc-driver"/&gt;,
          &lt;sll:parameter-value select="connect-url"/&gt;,
          &lt;sll:parameter-value select="user-name"/&gt;,
          &lt;sll:parameter-value select="password"/&gt;,
          request
        );
      &lt;/xsp:logic&gt;
    &lt;/sll:body&gt;
  &lt;/sll:element&gt;
&lt;/sll:logicsheet&gt;
</pre>
</td><td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
</table>
</div>

   
<p align="justify">
     SiLLy logicsheets are translated into an equivalent XSLT stylesheet
     using XSLT itself.
   </p>

   
<p>
<table border="0" cellpadding="0" cellspacing="3" width="100%">
<tr>
<td valign="top" width="28"><img alt="Note" border="0" hspace="0" vspace="0" height="29" width="28" src="images/note.gif"></td><td valign="top"><font color="#000000" face="arial,helvetica,sanserif" size="-1"><i>
     It is possible (and, indeed, simple) to generate a stylesheet that
     uses the <code><font face="courier, monospaced">xsl</font></code> namespace without ambiguity: XSLT processors
     are bound to the XSL namespace <i>URI</i>, rather than to its
     prefix. In addition to this, XSLT defines a
     <code><font face="courier, monospaced">&lt;xsl:namespace-alias&gt;</font></code> directive that can
     be used to map one namespace's URI to another.
   </i></font></td>
</tr>
</table>
</p>

   
<p align="justify">
     SiLLy provides a limited form of parameter validation: when a dynamic
     tag parameter is defined as <i>required</i> its absence in the
     source XML document will trigger the abnormal termination of the
     code generation process producing a (more or less) meaningful message
     by means of <code><font face="courier, monospaced">&lt;xsl:message&gt;</font></code>
   
</p>

   
<p align="justify">
     It's also possible to specify a list valid values for a parameter.
     Such list will be used for parameter validation when values passed
     are constants known at transformation time.
   </p>

   
<p align="justify">
     In addition to dynamic <i>tags</i>, SiLLy can also match attributes,
     and processing instructions.
   </p>

   
<p align="justify">
     In absence of a schema or DTD, the following examples illustrate
     the basic SiLLy matching and transformation capabilities (use-cases
     are shown as XML comments):
   </p>


<div align="center">
<table border="0" cellpadding="0" cellspacing="4">
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td bgcolor="#ffffff">
<pre>

&lt;!-- &lt;util:time-of-day format="hh:mm aa"/&gt; --&gt;
&lt;sll:element name="time-of-day" uri="http://www.plenix.org/util" prefix="util"&gt;
  &lt;sll:parameter name="format" default="hh:mm:ss"/&gt;
  &lt;sll:body&gt;
    &lt;xsp:expr&gt;
      SimpleDateFormat.getInstance().format(
        new Date(),
        &lt;sll:parameter-value name="format"/&gt;
      )
    &lt;/xsp:expr&gt;
  &lt;/sll:body&gt;
&lt;/sll:element&gt;

&lt;!-- &lt;img flag:src="languageCode"/&gt; --&gt;
&lt;sll:attribute name="src" uri="http://www.plenix.org/translator" prefix="flag"&gt;
  &lt;sll:body&gt;
    &lt;xsp:attribute name="src"&gt;&lt;xsp:expr&gt;
      request.getParameter("&lt;sll:attribute-value/&gt;");
    &lt;/xsp:expr&gt;.gif&lt;/xsp:attribute&gt;
  &lt;/sll:body&gt;
&lt;/sll:attribute&gt;

&lt;!-- &lt;?log Commit point reached?&gt; --&gt;
&lt;sll:processing-instruction target="log"&gt;
  &lt;sll:body&gt;
    &lt;xsp:logic&gt;
      logger.log("&lt;sll:pi-data/&gt;");
    &lt;/xsp:logic&gt;
  &lt;/sll:body&gt;
&lt;/sll:attribute&gt;
</pre>
</td><td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
</table>
</div>
   
   
<p>
<table border="0" cellpadding="0" cellspacing="3" width="100%">
<tr>
<td valign="top" width="28"><img alt="Note" border="0" hspace="0" vspace="0" height="29" width="28" src="images/note.gif"></td><td valign="top"><font color="#000000" face="arial,helvetica,sanserif" size="-1"><i>
     <code><font face="courier, monospaced">&lt;sll:processing-instruction&gt;</font></code> is probably
     overkill
   </i></font></td>
</tr>
</table>
</p>
 
</font></td>
</tr>
</table>
</div>
<br>


</td>
</tr>
</table>
</td>
</tr>
</table>
<table width="100%" cellspacing="0" cellpadding="0" border="0">
<tr>
<td bgcolor="#0086b2"><img width="1" src="images/dot.gif" height="1"></td>
</tr>
<tr>
<td align="center"><font size="-1" face="arial,helvetica,sanserif" color="#0086b2"><i>Copyright &copy; 1999-2002 The Apache Software Foundation. All Rights Reserved.</i></font></td>
</tr>
</table>
</body>
</html>
