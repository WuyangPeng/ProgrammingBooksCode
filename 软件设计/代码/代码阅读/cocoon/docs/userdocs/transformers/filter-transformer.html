<html xmlns:NetUtils="org.apache.cocoon.util.NetUtils">
<head>
<META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Filter Transformer</title>
<script type="text/javascript" src="resources/script.js" language="JavaScript"></script>
</head>
<body bgcolor="#ffffff" marginheight="4" marginwidth="4" leftmargin="4" topmargin="4" alink="#cc0000" vlink="#0086b2" link="#039acc" text="#000000">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td align="left" valign="top" rowspan="3" height="60" width="135"><img border="0" vspace="0" hspace="0" src="images/logo.gif" height="60" width="135"></td><td background="images/line.gif" colspan="2" align="left" valign="top" height="5" width="100%"><img align="left" border="0" vspace="0" hspace="0" src="images/line.gif" height="5" width="1"></td><td align="left" valign="top" rowspan="3" height="60" width="29"><img border="0" vspace="0" hspace="0" src="images/right.gif" height="60" width="29"></td>
</tr>
<tr>
<td bgcolor="#0086b2" colspan="2" align="right" valign="top" height="35" width="100%"><img align="right" alt="Filter Transformer" border="0" vspace="0" hspace="0" src="graphics/filter-transformer-header.jpg_label=Filter%20Transformer.jpg"></td>
</tr>
<tr>
<td background="images/bottom.gif" bgcolor="#0086b2" align="left" valign="top" height="20" width="100%"><img align="left" border="0" vspace="0" hspace="0" src="images/bottom.gif" height="20" width="3"></td><td background="images/bottom.gif" width="288" valign="top" height="20" bgcolor="#0086b2" align="right">
<table width="288" cellspacing="0" cellpadding="0" border="0">
<tr>
<td align="left" valign="top" height="20" width="96"><a onMouseOver="rolloverOn('xml');" onMouseOut="rolloverOff('xml');" target="new" href="http://xml.apache.org/"><img onLoad="rolloverLoad('xml', 'images/button-xml-hi.gif', 'images/button-xml-lo.gif');" border="0" vspace="0" hspace="0" name="xml" src="images/button-xml-lo.gif" height="20" width="96" alt="http://xml.apache.org/"></a></td><td align="left" valign="top" height="20" width="96"><a onMouseOver="rolloverOn('asf');" onMouseOut="rolloverOff('asf');" target="new" href="http://www.apache.org/"><img onLoad="rolloverLoad('asf', 'images/button-asf-hi.gif', 'images/button-asf-lo.gif');" border="0" vspace="0" hspace="0" name="asf" src="images/button-asf-lo.gif" height="20" width="96" alt="http://www.apache.org/"></a></td><td align="left" valign="top" height="20" width="96"><a onMouseOver="rolloverOn('w3c');" onMouseOut="rolloverOff('w3c');" target="new" href="http://www.w3.org/"><img onLoad="rolloverLoad('w3c', 'images/button-w3c-hi.gif', 'images/button-w3c-lo.gif');" border="0" vspace="0" hspace="0" name="w3c" src="images/button-w3c-lo.gif" height="20" width="96" alt="http://www.w3.org/"></a></td>
</tr>
</table>
</td>
</tr>
</table>
<table width="100%" cellspacing="0" cellpadding="0" border="0">
<tr width="100%">
<td valign="top" width="120">
<table width="120" cellspacing="0" cellpadding="0" border="0">
<tr>
<td valign="top" align="left"><img width="120" vspace="0" src="images/join.gif" hspace="0" height="14" border="0"><br>
</td>
</tr>
<tr>
<td valign="top" align="left"><a onMouseOver="rolloverOn('Main')" onMouseOut="rolloverOff('Main')" href="../../index.html"><img onLoad="rolloverLoad('Main', 'graphics/Main-label_over.jpg', 'graphics/Main-label.jpg');" vspace="0" hspace="0" name="Main" width="120" height="12" border="0" src="graphics/Main-label.jpg" alt="Main"></a></td>
</tr>
<tr>
<td valign="top" align="left"><a onMouseOver="rolloverOn('User Documentation')" onMouseOut="rolloverOff('User Documentation')" href="../index.html"><img onLoad="rolloverLoad('User Documentation', 'graphics/User%20Documentation-label_over.jpg', 'graphics/User%20Documentation-label.jpg');" vspace="0" hspace="0" name="User Documentation" width="120" height="12" border="0" src="graphics/User%20Documentation-label.jpg" alt="User Documentation"></a></td>
</tr>
<tr>
<td valign="top" align="left"><img alt="Transformers" width="120" vspace="0" src="graphics/Transformers-separator.jpg" hspace="0" height="20" border="0"><br>
</td>
</tr>
<tr>
<td valign="top" align="left"><a onMouseOver="rolloverOn('Overview')" onMouseOut="rolloverOff('Overview')" href="transformers.html"><img onLoad="rolloverLoad('Overview', 'graphics/Overview-label_over.jpg', 'graphics/Overview-label.jpg');" vspace="0" hspace="0" name="Overview" width="120" height="12" border="0" src="graphics/Overview-label.jpg" alt="Overview"></a></td>
</tr>
<tr>
<td valign="top" align="left"><img alt="Default" width="120" vspace="0" src="graphics/Default-separator.jpg" hspace="0" height="20" border="0"><br>
</td>
</tr>
<tr>
<td valign="top" align="left"><a onMouseOver="rolloverOn('XSLT Transformer')" onMouseOut="rolloverOff('XSLT Transformer')" href="xslt-transformer.html"><img onLoad="rolloverLoad('XSLT Transformer', 'graphics/XSLT%20Transformer-label_over.jpg', 'graphics/XSLT%20Transformer-label.jpg');" vspace="0" hspace="0" name="XSLT Transformer" width="120" height="12" border="0" src="graphics/XSLT%20Transformer-label.jpg" alt="XSLT Transformer"></a></td>
</tr>
<tr>
<td valign="top" align="left"><img alt="Core" width="120" vspace="0" src="graphics/Core-separator.jpg" hspace="0" height="20" border="0"><br>
</td>
</tr>
<tr>
<td valign="top" align="left"><a onMouseOver="rolloverOn('Fragment Extractor Transformer')" onMouseOut="rolloverOff('Fragment Extractor Transformer')" href="extractor-transformer.html"><img onLoad="rolloverLoad('Fragment Extractor Transformer', 'graphics/Fragment%20Extractor%20Transformer-label_over.jpg', 'graphics/Fragment%20Extractor%20Transformer-label.jpg');" vspace="0" hspace="0" name="Fragment Extractor Transformer" width="120" height="12" border="0" src="graphics/Fragment%20Extractor%20Transformer-label.jpg" alt="Fragment Extractor Transformer"></a></td>
</tr>
<tr>
<td valign="top" align="left"><a onMouseOver="rolloverOn('I18n Transformer')" onMouseOut="rolloverOff('I18n Transformer')" href="i18n-transformer.html"><img onLoad="rolloverLoad('I18n Transformer', 'graphics/I18n%20Transformer-label_over.jpg', 'graphics/I18n%20Transformer-label.jpg');" vspace="0" hspace="0" name="I18n Transformer" width="120" height="12" border="0" src="graphics/I18n%20Transformer-label.jpg" alt="I18n Transformer"></a></td>
</tr>
<tr>
<td valign="top" align="left"><a onMouseOver="rolloverOn('Log Transformer')" onMouseOut="rolloverOff('Log Transformer')" href="log-transformer.html"><img onLoad="rolloverLoad('Log Transformer', 'graphics/Log%20Transformer-label_over.jpg', 'graphics/Log%20Transformer-label.jpg');" vspace="0" hspace="0" name="Log Transformer" width="120" height="12" border="0" src="graphics/Log%20Transformer-label.jpg" alt="Log Transformer"></a></td>
</tr>
<tr>
<td valign="top" align="left"><a onMouseOver="rolloverOn('SQL Transformer')" onMouseOut="rolloverOff('SQL Transformer')" href="sql-transformer.html"><img onLoad="rolloverLoad('SQL Transformer', 'graphics/SQL%20Transformer-label_over.jpg', 'graphics/SQL%20Transformer-label.jpg');" vspace="0" hspace="0" name="SQL Transformer" width="120" height="12" border="0" src="graphics/SQL%20Transformer-label.jpg" alt="SQL Transformer"></a></td>
</tr>
<tr>
<td valign="top" align="left"><a onMouseOver="rolloverOn('Filter Transformer')" onMouseOut="rolloverOff('Filter Transformer')" href="filter-transformer.html"><img onLoad="rolloverLoad('Filter Transformer', 'graphics/Filter%20Transformer-label_over.jpg', 'graphics/Filter%20Transformer-label.jpg');" vspace="0" hspace="0" name="Filter Transformer" width="120" height="12" border="0" src="graphics/Filter%20Transformer-label.jpg" alt="Filter Transformer"></a></td>
</tr>
<tr>
<td valign="top" align="left"><a onMouseOver="rolloverOn('Read DOM Session Transformer')" onMouseOut="rolloverOff('Read DOM Session Transformer')" href="readdomsession-transformer.html"><img onLoad="rolloverLoad('Read DOM Session Transformer', 'graphics/Read%20DOM%20Session%20Transformer-label_over.jpg', 'graphics/Read%20DOM%20Session%20Transformer-label.jpg');" vspace="0" hspace="0" name="Read DOM Session Transformer" width="120" height="12" border="0" src="graphics/Read%20DOM%20Session%20Transformer-label.jpg" alt="Read DOM Session Transformer"></a></td>
</tr>
<tr>
<td valign="top" align="left"><a onMouseOver="rolloverOn('Write DOM Session Transformer')" onMouseOut="rolloverOff('Write DOM Session Transformer')" href="writedomsession-transformer.html"><img onLoad="rolloverLoad('Write DOM Session Transformer', 'graphics/Write%20DOM%20Session%20Transformer-label_over.jpg', 'graphics/Write%20DOM%20Session%20Transformer-label.jpg');" vspace="0" hspace="0" name="Write DOM Session Transformer" width="120" height="12" border="0" src="graphics/Write%20DOM%20Session%20Transformer-label.jpg" alt="Write DOM Session Transformer"></a></td>
</tr>
<tr>
<td valign="top" align="left"><a onMouseOver="rolloverOn('XInclude Transformer')" onMouseOut="rolloverOff('XInclude Transformer')" href="xinclude-transformer.html"><img onLoad="rolloverLoad('XInclude Transformer', 'graphics/XInclude%20Transformer-label_over.jpg', 'graphics/XInclude%20Transformer-label.jpg');" vspace="0" hspace="0" name="XInclude Transformer" width="120" height="12" border="0" src="graphics/XInclude%20Transformer-label.jpg" alt="XInclude Transformer"></a></td>
</tr>
<tr>
<td valign="top" align="left"><a onMouseOver="rolloverOn('CInclude Transformer')" onMouseOut="rolloverOff('CInclude Transformer')" href="cinclude-transformer.html"><img onLoad="rolloverLoad('CInclude Transformer', 'graphics/CInclude%20Transformer-label_over.jpg', 'graphics/CInclude%20Transformer-label.jpg');" vspace="0" hspace="0" name="CInclude Transformer" width="120" height="12" border="0" src="graphics/CInclude%20Transformer-label.jpg" alt="CInclude Transformer"></a></td>
</tr>
<tr>
<td valign="top" align="left"><img alt="Optional" width="120" vspace="0" src="graphics/Optional-separator.jpg" hspace="0" height="20" border="0"><br>
</td>
</tr>
<tr>
<td valign="top" align="left"><a onMouseOver="rolloverOn('XT Transformer')" onMouseOut="rolloverOff('XT Transformer')" href="xt-transformer.html"><img onLoad="rolloverLoad('XT Transformer', 'graphics/XT%20Transformer-label_over.jpg', 'graphics/XT%20Transformer-label.jpg');" vspace="0" hspace="0" name="XT Transformer" width="120" height="12" border="0" src="graphics/XT%20Transformer-label.jpg" alt="XT Transformer"></a></td>
</tr>
<tr>
<td valign="top" align="left"><a onMouseOver="rolloverOn('LDAP Transformer')" onMouseOut="rolloverOff('LDAP Transformer')" href="ldap-transformer.html"><img onLoad="rolloverLoad('LDAP Transformer', 'graphics/LDAP%20Transformer-label_over.jpg', 'graphics/LDAP%20Transformer-label.jpg');" vspace="0" hspace="0" name="LDAP Transformer" width="120" height="12" border="0" src="graphics/LDAP%20Transformer-label.jpg" alt="LDAP Transformer"></a></td>
</tr>
<tr>
<td align="left" valign="top"><img width="120" vspace="0" src="images/close.gif" hspace="0" height="14" border="0"><br>
</td>
</tr>
</table>
</td><td>
<table cellspacing="0" cellpadding="0" border="0">
<tr>
<td height="10" width="100%"></td>
</tr>
<tr>
<td>
	
	
		
<div align="right">
<table cellpadding="0" cellspacing="0" width="98%" border="0">
<tr>
<td align="right" valign="bottom" height="7" width="9"><img border="0" hspace="0" vspace="0" height="7" width="9" src="images/bar-top-left.gif"></td><td background="images/bar-border-top.gif"><img border="0" hspace="0" vspace="0" height="5" width="1" src="images/void.gif"></td><td align="left" valign="bottom" height="7" width="9"><img border="0" hspace="0" vspace="0" height="7" width="9" src="images/bar-top-right.gif"></td>
</tr>
<tr>
<td background="images/bar-border-left.gif" width="9"><img border="0" hspace="0" vspace="0" height="1" width="9" src="images/void.gif"></td><td bgcolor="#0086b2" width="100%"><font color="#ffffff" face="arial,helvetica,sanserif" size="+1"><img border="0" hspace="0" vspace="0" height="5" width="5" src="images/void.gif"><b>Filter Transformer</b></font></td><td background="images/bar-border-right.gif" width="9"><img border="0" hspace="0" vspace="0" height="1" width="9" src="images/void.gif"></td>
</tr>
<tr>
<td align="right" valign="top" height="12" width="9"><img border="0" hspace="0" vspace="0" height="12" width="9" src="images/bar-bottom-left.gif"></td><td background="images/bar-border-bottom.gif"><img border="0" hspace="0" vspace="0" height="12" src="images/void.gif"></td><td align="left" valign="top" height="12" width="9"><img border="0" hspace="0" vspace="0" height="12" width="9" src="images/bar-bottom-right.gif"></td>
</tr>
</table>
<table cellpadding="0" cellspacing="0" width="98%" border="0">
<tr>
<td><font color="#000000" face="arial,helvetica,sanserif">
			
<p align="justify">The filter transformer can be used to let only an amount of elements 
                     through in a given block.</p>
			
<blockquote>
<ul>
				
<li>Name : filter</li>
				
<li>Class: org.apache.cocoon.transformation.FilterTransformer</li>
				
<li>Cacheable: no.</li>
			
</ul>
</blockquote>

<p align="justify">
When you for example query a database and it returns too many rows too process at once, you 
might want to take a block of elements, process this block and ignore the rest 
for now. You can best compare it to a search on Google: they only return 10 
results in one time, for more results you have to click on another block (page). 
It wouldn't be wise to process more than 10 elements in the pipeline if you only 
need to display 10 elements.
</p>

<p align="justify">
Assume that a query returns 56 row elements (by using the SQLTransformer) and 
that you only want to display the first 10 elements:
</p>

<p align="justify">
Output XML from the SQLTransformer:
</p>

    
<div align="center">
<table border="0" cellpadding="0" cellspacing="4">
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td bgcolor="#ffffff">
<pre>
     
      &lt;rowset nrofrows="56" name="test" 
xmlns="http://apache.org/cocoon/SQL/2.0"&gt;
        &lt;row&gt;
          &lt;!-- db record --&gt;
        &lt;/row&gt;
        &lt;row&gt;
          &lt;!-- db record --&gt;
        &lt;/row&gt;
        &lt;row&gt;
          &lt;!-- db record --&gt;
        &lt;/row&gt;

        ...

        &lt;row&gt;
          &lt;!-- db record --&gt;
        &lt;/row&gt;
      &lt;/rowset&gt;
     
    </pre>
</td><td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
</table>
</div>


<p align="justify">
By adding following lines to the sitemap, just under the SQLTransformer, you 
restrict the results to 10 elements in the first block:
</p>

    
<div align="center">
<table border="0" cellpadding="0" cellspacing="4">
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td bgcolor="#ffffff">
<pre>
     
      &lt;map:transform type="filter"&gt;
        &lt;map:parameter name="element-name" value="row"/&gt;
        &lt;map:parameter name="count" value="10"/&gt;
        &lt;map:parameter name="blocknr" value="1"/&gt;
      &lt;/map:transform&gt;
     
    </pre>
</td><td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
</table>
</div>


<p align="justify">
output XML:
</p>

    
<div align="center">
<table border="0" cellpadding="0" cellspacing="4">
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td bgcolor="#ffffff">
<pre>
     
      &lt;rowset nrofrows="56" name="test" 
xmlns="http://apache.org/cocoon/SQL/2.0"&gt;
        &lt;block id="1"&gt;
          &lt;row&gt;
            &lt;!-- db record --&gt;
          &lt;/row&gt;

          &lt;!-- total of 10 rows --&gt;

          &lt;row&gt;
            &lt;!-- db record --&gt;
          &lt;/row&gt;
        &lt;/block&gt;
        &lt;block id="2"/&gt;
        &lt;block id="3"/&gt;
        &lt;block id="4"/&gt;
        &lt;block id="5"/&gt;
        &lt;block id="6"/&gt;
      &lt;/rowset&gt;
     
    </pre>
</td><td width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
<tr>
<td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td><td height="1" width="1" bgcolor="#0086b2"><img border="0" hspace="0" vspace="0" height="1" width="1" src="images/void.gif"></td>
</tr>
</table>
</div>


<p align="justify">
To make it more dynamically, put something like {reqCount} and {reqBlock} in the 
values for count and blocknr respectively. These can be parameters from the 
request and they can be passed to the sitemap with an action.
</p>

<p align="justify">
The FilterTransformer is a standalone component, you don't need to use it in 
combination with the SQLTransformer.
</p>
		
</font></td>
</tr>
</table>
</div>
<br>
	

</td>
</tr>
</table>
</td>
</tr>
</table>
<table width="100%" cellspacing="0" cellpadding="0" border="0">
<tr>
<td bgcolor="#0086b2"><img width="1" src="images/dot.gif" height="1"></td>
</tr>
<tr>
<td align="center"><font size="-1" face="arial,helvetica,sanserif" color="#0086b2"><i>Copyright &copy; 1999-2002 The Apache Software Foundation. All Rights Reserved.</i></font></td>
</tr>
</table>
</body>
</html>
